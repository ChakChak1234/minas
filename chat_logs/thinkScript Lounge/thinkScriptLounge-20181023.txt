10:51 John1a: Vimes: Yes, it should, but on those days, it does not
10:52 John1a: Vimes: Using just RTH, I don't have any issues either
10:53 JohnnyQuotron: I spent a couple of hours yesterday working in the Options Section of the OneNote.  I am doing my best to segregate true Options scripts from Volatility scripts.  Please be patient, these is a great deal of duplication in the Options Section and I am cleaning it out using the notepad++ compare addon.
10:54 JoshuaK: Nube, take for example the VWAP
10:54 JoshuaK: study if you go into the thinkscript, tehre are multiple values defined, price, vwap, pricesum etc.
10:54 Vimes: John, what is it you want? in your mind should vwap start at US RTH regardless of your settings?
10:55 JoshuaK: when you add the VWAP to the column, it gives you the actual VWAP value
10:55 MTS1: I have you the answer already Josh; reduce to one plot
10:55 JoshuaK: oh ok
10:55 JoshuaK: so when i reduce to one plot, the study automatically knows what to return?
10:56 MTS1: also really not realize specifically to VWAp; there's also a vwap fundamental price value that's used in but otherwise not related to the study
10:56 MTS1: yes try it Josh
10:56 Vimes: With globex, vwap starts at globex session
 
10:57 JoshuaK: will do
10:57 JoshuaK: thanks MTS1
10:57 MTS1: yw
10:58 Mobius: We've turned into support. Does that increase TDA bottom line?
10:58 John1a: Vimes: Is your "Adjust for contract change events" selected?
11:00 JohnnyQuotron: Mobius... it was many tractor trailers of JD ago, but in Oct 2013 you composed a script titled "Implied Volatility and RSI Combined Signal".  Was that intended as an example of a CSA script?  Which OneNote section would you recommend that I place it in?
11:01 Mobius: If you can remind me what I had for dinner last night I might recall that too
11:02 Vimes: John, no, but you can play with the different settings, and if its important there is an interanl vwap reference where you can roll your own for whatever it is your looking for
11:02 trader_s: is it possible to increase the font size on AddLabel  script ?? Thx
11:03 Mobius: no trader it's not
11:03 JohnnyQuotron: Mobius...thins may jog the little gray cells
11:03 trader_s: thx Mobius
11:03 Mobius: post the code Johnny
11:04 JohnnyQuotron: # MobiusÂ©:Sat Oct-19-2013

# Implied Volatility and RSI Combined Signal
# Mobius
# V01.10.2013
declare lower;
input length = 21;
Assert(length > 0, "'length' must be positive: " + length);
   def IV = if isNaN(imp_volatility(period = AggregationPeriod.DAY))
            then IV[1]
            else imp_volatility(period = AggregationPeriod.DAY);
def price = close * IV;
def r = (price - price[1]) / ( (price + price[1]) / 2 );# difference divided by the average price
def SDr = StDev(r, length);
plot IVSwitch = ( fold i = 0 to length 
                          with count 
                          do count + if SDr[i] <= SDr 
                                     then 1 
                                     else 0 ) / length;
plot MidLine = 0.5;
IVSwitch.DefineColor("Trending", Color.UPTICK);
IVSwitch.DefineColor("Mean-Reverting", Color.DOWNTICK);
IVSwitch.AssignValueColor(if IVSwitch >= MidLine 
                          then IVSwitch.Color("Mean-Reverting") 
                          else IVSwitch.Color("Trending"));
MidLine.SetDefaultColor(GetColor(7));
# RSI Wilder with Divergence Markers
input nRSI = 14;         #hint nRSI: RSI periods
input nTrend = 100;      #hint nTrend: RSI Trend Line periods
input over_Bought = .70; #hint over_Bought: Over Bought Line
input over_Sold = .30;   #hint over_Sold: Over Sold Line
input TrendLine = {EMA, SMA, default LRL, WMA};
input AlertOn = yes;
   def o = open;
   def h = high;
   def l = low;
   def c = close;
   def NetChgAvg = WildersAverage(c - c[1], nRSI);
   def TotChgAvg = WildersAverage(AbsValue(c - c[1]), nRSI);
   def ChgRatio = if TotChgAvg != 0 
                  then NetChgAvg / TotChgAvg 
                  else 0;
  def RSIdata = 50 * (ChgRatio + 1) ;
  plot RSI = (RSIdata - LowestALL(RSIdata)) / 
             (HighestAll(RSIdata) - LowestAll(RSIdata));
  plot OverSold = over_Sold;
  plot OverBought = over_Bought;
  plot RSItrend;
  switch (TrendLine) {
  case EMA:
       RSItrend = ExpAverage(RSI, nTrend);
  case SMA:
       RSItrend = Average(RSI, nTrend);
  case LRL:
       RSItrend = InertiaAll(RSI, nTrend);
  case WMA:
       RSItrend = WMA(RSI, nTrend);
}
   def lowestLow = if RSI > over_Sold
                   then l
                   else if RSI < over_Sold and 
                           l < lowestLow[1]
                   else lowestLow[1];
   def lowestRSI = if RSI > MidLine
                   then RSI
                   else if RSI < MidLine and 
                           RSI < lowestRSI[1]
                   else lowestRSI[1];
   def divergentLow = if RSI < over_Sold and
                         l <= lowestLow[1] and 
                         RSI > lowestRSI[1]
                      then over_Sold
                      else Double.NaN;
  plot DLow = divergentLow;
       DLow.SetPaintingStrategy(PaintingStrategy.POINTS);
       DLow.SetLineWeight(2);
       DLow.SetDefaultColor(Color.YELLOW);
   def highestHigh = if RSI < over_Bought
                     then h
                     else if RSI > over_Bought and 
                             h > highestHigh[1]
                     else highestHigh[1];
   def highestRSI = if RSI < MidLine
                    then RSI
                    else if RSI > MidLine and 
                            RSI > highestRSI[1]
                    else highestRSI[1];
   def divergentHigh = if RSI > over_Bought and
                          h >= highestHigh and 
                          RSI < highestRSI
                       then over_Bought
                       else if RSI < over_Bought and 
                       c < o
                       then Double.Nan
                       else divergentHigh[1];
  plot DHigh = divergentHigh;
       DHigh.SetPaintingStrategy(PaintingStrategy.POINTS);
       DHigh.SetLineWeight(2);
       DHigh.SetDefaultColor(Color.YELLOW);
       RSI.DefineColor("OverBought", Color.Plum);
       RSI.DefineColor("Normal", Color.White);
       RSI.DefineColor("OverSold", Color.Yellow);
       RSI.AssignValueColor(if RSI > over_Bought 
                            then RSI.Color("OverBought") 
                            else if RSI < over_Sold 
                            then RSI.Color("OverSold") 
                            else RSI.Color("Normal"));
       OverSold.SetDefaultColor(Color.BLUE);
       OverBought.SetDefaultColor(Color.BLUE);
   def AlertCond1 = RSI crosses RSItrend;
  plot Bcond1 = if IVSwitch crosses below overBought within 2 bars and 
                   RSI > RSI[1]
                then OverSold
                else Double.NaN;
       Bcond1.SetPaintingStrategy(PaintingStrategy.Arrow_Up);
       Bcond1.SetLineWeight(3);
       Bcond1.SetDefaultColor(Color.Green);
  plot Bcond2 = if isDescending(IVSwitch) and 
                   isAscending(RSI) and
                   RSI crosses above RSItrend
                then RSItrend 
                else Double.NaN; 
       Bcond2.SetPaintingStrategy(PaintingStrategy.Arrow_Up);
       Bcond2.SetLineWeight(2);
       Bcond2.SetDefaultColor(Color.Light_Green);
  plot Scond1 = if IVSwitch > IVSwitch[1] and
                   RSI crosses below overBought
                then overBought
       Scond1.SetPaintingStrategy(PaintingStrategy.Arrow_Down);
       Scond1.SetLineWeight(3);
       Scond1.SetDefaultColor(Color.Red);
  Alert(AlertCond1, "RSI crossed RSI Trend Line", Alert.Bar, Sound.Bell);
# End Code IV and RSI Combined Signal
11:04 AlphaInvestor: I would create a separate section for Combined Signal Apporach scripts
11:05 Mobius: Johnny that study is Not a CSA. Price is altered using IV which would cause it to run faster in higher volatility and slower in lower
11:06 JohnnyQuotron: Alpha... I would like to do that if only to attract more over time
11:07 Mobius: A better approach would be to alter the length for RSI using Series IV which we didn't have when that study was written
11:09 JohnnyQuotron: Sounds like a worthwile project for someone more advanced than I.  
11:09 JohnnyQuotron: I will plce the script in the RSI section as opposed to volatility unless you reccomend differently.
11:10 Mobius: That works for me
11:11 Mobius: To alter length using IV is pretty straight forward. Normalize IV to a useful RSI lenght.
11:11 JohnnyQuotron: Thank you.  You are the best!  By the way this morning I picked up Lobster Rolls for my wife and for lunch today.  Its Stone Crab season but with the Red Tide ???
11:12 Mobius: yeah   that whole red tide thing makes seafood a bit risky
11:13 Mobius: That storm hasn't helped either
11:13 Vimes: Did alot of random coding over the weekend and wanted to share this based on a TASC article around fractal efficency, the backtesting looked somewhat encouraging so thought i'd share with the group:
#Polarized fractal energy strat
#Hans Hannula TASC V12.1
#"PFE tends to have a maximum efficiency of about 43%, either going up or down. This has been found to be true for all stock indices. Other stocks and commodities tend to have slightly different maximums, but the maximum has always been observed. Also note that the transition from trending up to trending down is usually smooth. However, the efficiency may bounce off the zero line or oscillate around it for a time. This middle region is a balance of supply and demand and, thus, a congestion point." -- Hans Hannula
#Version 1
#Study Name Short PFE_Strat 
#Date: 2018/10/21
#Coded in TOS by Vimes
input length = 10;
input smooth = 5;
input UpperBand = 50; #hint UpperBand: Efficiency Upperband, experiement with different triggers (43,50,60,etc);
input LowerBand = -50;
input BuyOnLowerCross = no; #hint BuyOnLowerCross: If "yes" buys on the cross above the lower band (not reccomended).  If no buys on the cross of the upper band (this is reccomended).  Sells are then opposite w.r.t to the lower band
input reverse = no; #hint reverse:Reverses the buy sell signal for the contrarian in you
input osize = 5;
def A = Sqrt(sqr(close - close[length-1]) + sqr(length));
def B = Sum(Sqrt(sqr((close - close[1])) + 1), length);
def FE = If(close - close[length-1] > 0, A/B*100 , -A/B*100);
def FE_EMA = ExpAverage(FE, smooth);
def long_ = If(FE_EMA crosses above If(BuyOnLowerCross, LowerBand, UpperBand), 1, 0);
def short_ = If(FE_EMA crosses below If(BuyOnLowerCross, UpperBand, LowerBand), 1, 0);
def long = If(short_ and reverse, 1, If(long_, 1, 0));
def short = If(long_ and reverse, 1, If(short_, 1, 0));
AddOrder(condition = long, tradeSize = osize, tickcolor = Color.CYAN, arrowcolor = Color.CYAN, name = "PFE:LE");
AddOrder(tradeSize = osize, tickcolor = Color.LIGHT_RED, arrowcolor = Color.LIGHT_RED, name = "PFE:SE", condition = short, type = OrderType.SELL_AUTO);
11:14 Mobius: Apalach.. Is looking at a possible loss for the oyster industry for decades to come
11:19 Ariana3: Mobius: Do you have a script that plots the third moment of volume distribution?
11:20 Mobius: When you read Mandelbrot's work and look at his set you come away with the idea he'd have much more likley wanted to measure the edges of price and find a predictive value along those edges than the PFE indicator that carries the notion of his work.
11:21 Mobius: Ariana... Why?
11:21 Ariana3: Because it is very useful to know the skew.
11:22 JohnnyQuotron: Naples/Ft.Myers may lose the entire 2018 StoneCrab season. But likely just this one.  
11:22 Mobius: Why didn't you just ask for skew. I'm not easily impressed
11:22 Vimes: If i undersood the premis correctly it is in that the author was trying to measure the edges in ratio to the straight line trend as a measure of "ease of movement" if you will
11:24 Mobius: Vimes  Where in those calculations do you see that??
11:25 Ariana3: Not trying to impress...because it seems  that the third volume of the volume distribution is a better way of doing it, but it seems that it cannot be done in TOS, because the profile is locked
11:25 Vimes: The numerator A was supposed to be this approximation - vs the straigt line B
11:26 Ariana3: VWAP + (SKEW * SD)
11:28 Ariana3: Something like this: CM3 = sum (PROBI * (Pi - VWAP) ^ 3
11:30 Mobius: Ariana.. 
# Volume Skew
# Chat room request 10.22.2018
plot Data = Power(volume - average(volume, 60), 3) / 
           Sqrt(Power(Sqr(volume - Average(volume, 60)), 3));
11:32 Ariana3: Where âiâ is going through all prices in range (i.e., all rows in Volume Distribution Function), CM3..the 3rd Central Moment, PROBI = Vi/Vâ¦its price probability (Volume per its price / Total Volume), Piâ¦the price in the Volume Distribution functionâ¦Then the Skew would be Skew = CM3 / SD^3
11:33 Mobius: Vimes - Have you ever looked at PFE and FE side by side?
11:36 Vimes: You have me at a disdavantage because i don't know where you are going, and you are likely much smarter than me, but if you are sayign the fractal efficency in reference versus fractal energy i would think they are quite different
11:37 Mobius: Vimes  Take a look and don't guess.. 
11:37 Mobius: You've got a good head for math.  What do you see?
11:41 Vimes: I would say it is almost trying to estimate the slope of the edge, except in that in the fractal energy case it is taking each against a ratio of the true range which i don't quite visualize
11:48 Mobius: Yep very close.. FE does a better job of showing when price is linear since it converts it to a log value.  If Mandelbrot were to start with those two my feeling is he'd use the FE as a central limit and PFE or some other measure of fractal length to determine how far price is traveling to make a predetermined fixed measure over a predetermined fixed length of time. 
11:48 Mobius: The half life of price movement through the fractal range if you will
11:49 Vimes: i guess to take a leap FE seems to be summing the true range over the period (which i'm not sure why it would seen to be an additive property) and taking the current periods high/low range as a ratio to this.  It would almost assume that each rangeis pure momentum versus the actual meausred range
11:52 Mobius: What we do know is any notion that price can be predicted from any use of a normal distribution is flawed.
Therefore price is always random. How do you measure random?
11:52 Vimes: so i guess in that way as you say it saying how much of the current high low range is a perfect linear trend on the A to B distance, i think i can see that
11:52 Mobius: yes
11:53 Mobius: Or at the very least  Random With Drift
11:54 Mobius: Worthless information for traders. Very useful for investors
11:54 Nube: I guess this means a Mandelbrot isn't a musical instrument...
11:54 Mobius: ha
11:55 AlphaInvestor: a musical instrument that hits random notes ... but in a repeating self-similar series
11:56 Vimes: so geometrically its saying estimate a triangle that woudl assume each true range over the period is positive so what woudl the maxium be so to speak, and the estimating the "real" observed Ya to Yb as a ratio to tis perfect triangle
11:56 Mobius: lol  that's pretty good Alpha
11:57 Mobius: Vimes.. I don't know if that would work. I've been trying to find a useful method for quite a while. And so far no joy. But as far as math and the market is concerned, to me that is the grail.
11:58 FrankB3:   Mr. Mo:: was that your idea putting the FE with the RSI LaGeaure???
11:58 Mobius: Problems Solved:
Linear estimating
True Momentum
Price Path prediction
Investment Moment
11:58 AlphaInvestor: The best way that PFE was described to me was - the ratio of a straight line direction to get from point A to Point B ... to the way that Price ACTUALLY got from Point A to Point B
11:59 Nube: Alpha, Thanks. I have a new respect for Yoko Ono now.
11:59 Mobius: Frank - yes
12:00 _Coleman_: Is it possible to write a script that will alert or scan  when a candle closes above the Kijun on the Ichimoku Cloud. 
12:00 Vimes: bless you
12:00 AlphaInvestor: Coleman - yes
12:00 Ariana3: I saw a t-shirt yesterday, "Still Hate Yoko" :)
12:01 Vimes: I think JNJ sells a cream if you've got Ichimoku
12:02 Nube: Judging by how many requests we've had lately, buy JnJ
12:07 Vimes: Coleman, i don't use the cloud but something like this might work or there maybe is a built in scanner
plot scan = close crosses above Ichimoku().Kijun;
12:09 Nube: Getting back to the side tracked discussion, does that mean we may want to account for fractal energy in the fractal efficiency?
12:10 Vimes: boom
12:11 Mobius: Coleman
# Scan - Comment out (#) the one you don't want
Ichimoku()."Kijun" crosses above MAX(Ichimoku()."Span A", Ichimoku()."Span B")
# Ichimoku()."Kijun" crosses below Min(Ichimoku()."Span A", Ichimoku()."Span B")
12:16 _Coleman_: Thanks as always.
12:16 Vimes: another happy customer
12:20 Nube: I wish you smart people would hurry up and solve markets for me already. I'm sitting here looking and breadth and volatility and means and monthly charts when you could just supply me with an indicator
12:23 Nube: All I want to do is type VZ or whatever in the ticker box and have the lower panel display a big Buy, Sell or Hold
12:25 Vimes: lol
12:27 Vimes: VZ, holding up well btw, but who the heck nows
12:27 Nube: Disclosure: Author does have a position in the above ticker by way of ETF and intends to initiate another
12:28 Nube: That was the first ticker that came to mind because I was just taking another look at it. Max Monthly view that thing is a monster
12:34 Vimes: addlabel BUY VZ
12:35 AlphaInvestor: AssignBackgroundColor(col.rgreen);
12:36 Vimes: i wonder how much impact the reshuffling into the XLC sector is having on rotatino into names like DISCA and VZ over google, nflx, etc
12:37 Nube: Fair question, Vimes. Sort of wonder the same about FB as well.
12:38 Vimes: i think the secotr is getting a lift because funds have to then put there money in the other names, maybe?
12:38 Nube: It's not a new thing so I imagine Funds have been positioning for a long time
13:24 JohnnyQuotron: Mobius/Vimes.. I just read your FE PFE exchange for the third time.  How do I get my eyes uncrossed ?  Where is the Dramamine?  But if there is something there for investors.. can you dumb it down for me a bit please...
13:26 Vimes: i think for investors ignore both and buy AAPL?
13:27 Nube: Not trying to pretend I understand  fractals, polarizing stuffs or efficiency, but doesn't the cross of zero make more sense than using an EMA?
13:29 Nube: AAPL has had a bit too much volatility up here for my tastes. Not touching it.
13:30 Nube: But certainly wouldn't short a cash machine that has a heretofore untouchable lead position in brand and product quality
13:30 Vimes: it maybe is the last mand standing but one of the few holding the quarter, if it goes we might be in trouble
13:31 Nube: With AAPL being like 6 percent of the index or whatever, if it goes the index doesn't have a choice
13:44 Nube: I haven't figured out what it is yet, but there is something about stock price behavior around earnings that causes those tickers to come up in my scans more often
14:12 Nube: See y'all later. Time to get some sunshine.
14:14 JohnnyQuotron: Nube... thanks a million.  Enjoy your afternoon.
14:14 ittechman: How do I create a stock scan that finds stocks that are trading in a range? Thank you!
14:19 MTS1: IT; what range?
14:21 ittechman: Lets say from 90.00 to 100.00 as an exammple..
14:21 MTS1: Dollars?
14:21 Farmin: for how long?
14:21 MTS1: you can type that directly in the scanner
14:23 MTS1: Look up the chapber on stock hacker in the tutorials in tlc.thinkorswim.com
14:24 MTS1: add filter for stock - close - set min and max.
14:24 Vimes: Mobius had a great scan that id's stocks in a range, let me see if i can find it, there are also several methods to do this, without a specifying a price range
14:26 MTS1: Depends on what he is looking for.
14:26 ittechman: VImes, yes that would be much better, to be able to do it without specifyng a range!!!! That is exactly what I am looking for!
14:27 MTS1: It depends how you define a range; many TA ways of doing this. You can look for BB contractoin, ADX, ECI, Fractal Pivots, and I'm sure there's more;)
14:27 Vimes: This should id stocks trading in a consolidatino pattern:
# Consolidation Scan
# 5.2.2017
# If you want  relatively short term consolidation leave the 
# lengths at 10 and use a daily scan. For a bit more consolidation 
# make lengths 13 and if you want equities that have been in 
# consolidation for a long time use a monthly scan
 (Log(Sum(Max(high, close[1]) - Min(low, close[1]), 10) / 
     (Highest(high, 10) - Lowest(low, 10))) / 
      Log(10)) > .7
14:27 ittechman: There are some stocks that trade in a range over and over again, that scan will be a wonderful tool!!!!!!!
14:27 Farmin: you always have to specify a range, even with that code
14:28 Vimes: Another one that i used in the past is the aroon oscillator
#
def consolidation = (AroonIndicator() < 30 and AroonIndicator().Down < 30) within 6 bars;
def breakout = sum(AroonIndicator(),3)> 3*90 and aroonIndicator().down < 30;
plot cond = consolidation and breakout;
14:28 Farmin: if you don't understand the range part of that code, get out a calculator
14:32 ittechman: Thank you all VERY MUCH!!!!!!!
14:41 ittechman: Are there other scans, like for stock that are just breaking out after a consolidation?
14:43 Vimes: i'm sure there are dozens of options, you can look at some of the linear channel breakouts that are built ino the scanner already as an example
14:43 Vimes: you can look fro break of prior highs, on an on
14:49 ittechman: Thank you!!!!!!!
15:04 AlphaInvestor: AMTD beat E, beat R - must be our fine support in this chat room  ;-)
15:09 Vimes: yeah free lifetime trades all around!!
15:10 MTS1: ha; don't think that's how they plan to continue beating;)
15:10 Vimes: it's a trend that's coming, eventually
15:44 Nube: Flood of new customers since the release of the Fundamental Data to ThinkScript
15:46 Nube: 1d34: That means idea and that I'm hip. The concept of splitting good volatility from bad volatility - has anyone tried looking at agreement between price and volatility? In other words, if both are up or both are down, that's good volatility.
15:51 Vimes: i've seen studies between historical and implied volatility, not that i'd want to call one good or bad
16:06 Vimes: I guess to tie it back to teh FE study if all the volatility is tied to directinoal movement you are going to see the FE move lower in value, versus if the volatility is non directional (bad?) you will see the value rise into chop or "in efficient" action
16:11 AlphaInvestor: Nube - idk, I was always under the impressions that IV and price went in opposite directions most times.
16:12 AlphaInvestor: I have done a few correlation studies between HV and IV, both with and without lags (because IV is meant to represent volatiltiy about 1 month out). The correlations are never good.
16:20 JohnnyQuotron: alpha.. a question or 2 regarding IV?
16:20 AlphaInvestor: sure
16:21 JohnnyQuotron: IV is meant to represent volatility a month out?  
16:21 JohnnyQuotron: Please be more specific, I am not following that.  (not intended to be a trick question) but with the advent of weeklies..
16:22 AlphaInvestor: IV in TOS uses the same formula that the VIX uses. it is a complex calculation using implied voltiltiies from a number of expirations and is meant to represent the IV approximately 1 month out.
16:22 AlphaInvestor: http://www.cboe.com/products/vix-index-volatility/vix-options-and-futures/vix-index/the-vix-index-calculation
16:22 Nube: To me, comparing IV to HV does a pretty good job of proving that what the market agrees is going to happen cannot happen.
16:23 Nube: Well, totally can but for a reason the market didn't think of.
16:24 AlphaInvestor: I know a guy who did a study that looked at putting IV bands around price ...and seeing how often the price stayed inside ... that guy was pretty smart
16:24 AlphaInvestor: that had lags too
16:25 JohnnyQuotron: follow on question to make certain i understand.... tos IV takes into account multiple futures expirations rather than just the IV of the most current ATM put and call?
16:26 AlphaInvestor: Here is the generalized (I assume they mean simplified) version of the VIX calculation
16:27 AlphaInvestor: JQkpa - definitietly, in fact, if closer than 7 days, it ignores the front week volatiltiy altogether I believe
16:30 JohnnyQuotron: I got curious this afternoon about the Gaussian RSI-L using inputs of 5, 13, 8 versus 8, 13, 4 or whatever.  So I put my Dr. Frankenstein mask on and put this monster together.  http://tos.mx/jclhlG#
16:32 AlphaInvestor: One requirement with the old VIX calculation was that it couldnï¿½t use options with less than 7 days to expire.
The CBOE's new calculation always uses options that expire within a week of the VIX's 30 days.
16:33 JohnnyQuotron: And Tos's IV study has been rewritten to meet that change?  
16:34 AlphaInvestor: I believe we were told that at one time.  That change was a while back.
16:34 JohnnyQuotron: thank you.
16:35 AlphaInvestor: I don't know how they deal with options that only have Monthly's
16:36 AlphaInvestor: David Kier (the old Mr.Script) was good about telling us about the internal calculations of TOS, but he never let the Market Maker Move (MMM) out of the bag
16:36 JohnnyQuotron: By the way.. and this is not a solicitation as I am not asking for money.  I am upgrading my x99 motherboards and processors to the x299 series.  If anyone would like the x99 boards and processors for spare parts please let me know.
16:37 AlphaInvestor: Pop the TOS Imp_Volatiltiy up for an SPX chart.... and add the VIX to t he bottom. You should find them to be indentical
16:38 JohnnyQuotron: Alpha... I trust your volatility fetish.
16:39 AlphaInvestor: I haven't tested that in a while
16:40 MTS1: hm; calling it a fetish after asking for help lol
16:40 Vimes: bad vix, bad!!
16:41 JohnnyQuotron: fetish is a gentler term than addiction
16:41 Nube: Even if they're not exactly identical, I highly doubt they after effectively different.
16:42 JohnnyQuotron: One can certainly lose big money trading of of either.
16:42 AlphaInvestor: I have both a fetish, and an addiction to IV
16:43 JohnnyQuotron: but do you have negative XHB deltas?
16:46 AlphaInvestor: I probably should, to hedge my small biz
16:49 JohnnyQuotron: If I were only smart enough to craft a scan to identify trends relative to the SPY like that one.  I'd be ......
16:57 Ariana3: JohnnyQ: Very nice work, butit seems that price is rarely in a Gaussian distribution.
17:04 AlphaInvestor: that is Exactly why that study converts to Gaussian first
17:06 Ariana3: It would be interesting to see it without using arbitrary N numbers, 5, 13, etc. Can it  be done for a daily distribution using VWAP?
17:08 AlphaInvestor: JQ - my current desktop can be upgraded to any of these 3 processors
Intel Core i7 4770 (Haswell) 3.4 GHz Quad Core
Intel Core i7 4770K (Haswell) 3.5 GHz Quad Core
Intel Core i7 4790 (Haswell) 3.6 GHz Quad Core
Do we have a match?
17:12 JohnnyQuotron: is that an x99 board 2011-3 socket?
17:12 Nube: # attempting to split good and bad volatility
# first idea
# Nube 10.22.18
input n = 20;
script normalize {
    input h = high;
    input l = low;
    input c = close;
    input Length = 20;
    input AvgPeriod = 2;
    def ll    = Lowest(l, Length);
    def cll   = c - ll;
    def hhll  = Highest(h, Length) - ll;
    def norm  = if   hhll != 0
                then Average(cll / hhll, AvgPeriod)
                else norm[1];
    plot
    normalized = norm;
def p  = hl2;
def iv = if   !IsNaN(imp_volatility())
         then imp_volatility()
         else iv[1];
def y = normalize(p, p, p, n); # normalized HL2 between 0 - 1
def nIV = normalize(iv, iv, iv, n); #normalize VixFix betwen 0 - 1
def ivValue = if   nIV  > nIV [1]
               then 1
               else if   nIV  < nIV[1]
                    then 0
                    else ivValue[1];
def priceValue = if   y > y [1]
                 then 1
                 else if   y < y[1]
                      then 0
                      else priceValue[1];
plot line = Sum(ivValue == priceValue, n);
17:13 JohnnyQuotron: Go Nube.  I like volatility in the direction of my deltas
17:13 Nube: So the notes are from the script I took the snippets out of. That uses IV, not vixfix
17:14 Nube: Note on that is wrong.
17:14 slashgw: it's an interesting idea.  
17:20 Nube: Next I think an enterprising scripter should find a method to weight the vol of each bar.
17:21 slashgw: it's all you Nube!
17:21 JohnnyQuotron: alpha... i7-5930K  on an asrock Taichi x99 board for example
17:22 Nube: After that the should write a version that also plots the same for the index so you can compare against the benchmark
17:28 JohnnyQuotron: nube.. did you have the opportunity to poke around the profit/loss script ?
17:30 Nube: Not yet. Want to get into that when I can set some time aside for it. Don't want to try to fly through that one.
17:30 AlphaInvestor: JQ - no go for me, unless I replace my motherboard
17:31 JohnnyQuotron: Thank you.  I appreciate it.
17:32 AlphaInvestor: There is nothing BAD about volatiltiy going up when price falls ... it is what is expected
17:33 AlphaInvestor: more puts get bot, puts get more expensive ... no magic happens
17:34 JohnnyQuotron: Alpha..  understood.  But if you ever over overclock that MB/Processor let me know.  I will keep my extra hardware until my wife makes me clean out my office closet again.  She's a real slave driver like that .
17:36 AlphaInvestor: I just checked - IV of SPX and VIX are not identical, but very close
17:36 slashgw: maybe put them in a box labeled "Christmas fruitcake to be re-gifted"
17:38 AlphaInvestor: To answer a different query - XHB often correlates well with /LBS. The 10 day correlation is currently 85%, the 60 day correlation is 68%
17:38 Nube: Then instead of calling that line good volatility it can be bad volatility or abnormal volatility etc
17:39 AlphaInvestor: in the past 252 days VIX and SPX moved opposite 30% of the time ...
17:39 AlphaInvestor: I believe that is unusually large
17:41 AlphaInvestor: I keep a constant alert in MarketWatch Alerts for when SPX goes UP more than the ATR, and VIX also rises.
17:43 AlphaInvestor: And the reverse of that  .... I have only seen it trigger one time while I was logged into TOS
17:43 amalia: Donât think itâs unusual
17:45 AlphaInvestor: that 30% probably isn't unusual, because SPX could have gone up a penny, and VIX gone up 0.01. The test needs to be more than just slight moves
17:46 slashgw: so maybe use % ?
17:46 AlphaInvestor: I used ATR in the MW Alert
17:47 AlphaInvestor: Well, I need to get home - dinner awaits - Later Traders
17:47 slashgw: or I mean, base it on a % increase across both, after determining what previous normals/extremes were.
17:47 JohnnyQuotron: later Alpha...fly safe
17:47 slashgw: just throwing stuff out there, I do not consider myself a propeller head with regard to that stuff
18:17 trader1023: Anyone have any ideas how to script up a calculation of a implied open? I can't even find starting blocks like fair value.
18:22 Nube: How do you calculate fair value?
18:24 slashgw: a comparison against whatever the futures index is currently at?
18:26 slashgw: would probably need more of an example how trader plans on using it.  and with what instruments?
18:26 Mobius: Fair Value = CashIndx(1+interstRate(DTE/360))-DivToEXP
18:28 Mobius: If your looking for an arbitrage opportunity forget it. MM's cover that in about 5/100 seconds of the open.
18:29 trader1023: I was just hopeing to calculate the implied open of the corresponding, so for example use /ES and work out the implied open for SPY
18:30 trader1023: But it is a lot to go and get all the dividends for all the components of the SPY etc. and was hoping that ThinkScript had some bits that might help
18:30 Nube: I dunno fellas, but I think the abnormal vol thing might be worth exploring. If we get price with 1 SD we get an event that happens 38% of the time
18:31 Nube:   
18:31 Nube: /es and /nq 5 years daily
18:39 Mobius: trader - maybe this will help you
1 E-mini SP 500 index contract = 500 SPY shares.
1 E-mini SP500 Point = .10 SPY cents.
1 E-mini SP500 Point is $50.00 = .10 SPY cents (times 500 shares) is $50.00 .
18:41 trader1023: Hmm OK. But there is a difference right cause it is a future so needs to include dividend and interest etc. right?
18:42 trader1023: Might be nice to start with a study that just does what you did and plots that on top of SPY for open based on the /ES
18:45 JohnnyQuotron: Mobius.. time for a twenty second teach-in regarding the RSI Laguerre Gaussian version?
18:47 JohnnyQuotron: inputs of 5, 13, 8 versus 8, 13, 4 what are we looking for or hoping to learn when we make that adjustment?
18:49 Nube: How is the implied open for /es determined?
18:50 trader1023: Prior Day Closing + (Futures Value - Fair Value)ï¿½
18:51 slashgw: is there an = somewhere?
18:52 slashgw: ah, nevermind.  see Nube's question now
18:52 Nube: I'm confused, what's the future for /ES?
18:53 DMonkey: Itâs only fair if it goes my way.
18:54 Nube: Let's assume you mean SPY. SPY closed at 275 so it's 275 + (/ES - FairValue)
18:55 Nube: Next step is do you use teh RTH close value for /ES or whatever the current price is?
18:56 trader1023: Nuve, Yeh so just need to calculate FairValue which is the difficult bit I think
18:56 trader1023: I think the current price
18:56 trader1023: As the implied open will keep changing until the SPX opens at the, in theory, implied open (if I understand it all correctly)
18:56 slashgw: SPY implied open = Prev SPY close +/-  /ES gap  ?
18:56 trader1023: Yeh think so
18:56 Mobius: /ES Fair Value is what it closed for last
18:57 trader1023: Really? I thought it didn't include all the extra interest dividend stuff
18:57 Mobius: Your looking for the Fair Value as compared to SPX
18:57 Paris: According to my notes Mobius posted a Fair Value  study way back in 2015, comparing SPX/ES 
18:57 slashgw: but nailing down the closer  ratio  between SPY and ES
18:58 Mobius: Pairs don't confuse the poor soul
18:58 trader1023: Oh right yeh sorry, the fair value of the underlying
18:58 Paris: Mohius - Gotcha, just checking in and watching the commentary. Going for my morning meetings now. Later folks
18:59 Mobius: LOL best to yah Paris
18:59 trader1023: The interest rates and dividends to expire etc. are all accessible in ToS right? Just need to interate through it all and add it all up?
19:00 Paris: And to you Mobius. Have a restful evening.
19:01 Mobius: Interest Rate is also an available variable in TOS
19:02 trader1023: ah ok
19:08 Nube: Mobius, am I reading that fair value correctly? Is that cash index multiplied by 1 + rate?
19:14 Mobius: Nube your leaving off some pretty good stuff there
19:19 DMonkey: Values
Sept S&P 500 Futures Price	1157.00 pts
 S&P 500 Cash Index	1146.00 pts
Interest Rate	5.7%
Dividends to Expiration of Futures (Converted to S&P points)	3.47 pts
Days to Expiration of the Futures Contract	 78 days
S&P 500 Dividend Yield	                       1.40%
Fair Value Calculation
Cash [1+r (x/360)] - Dividends	1146 [1+.057 (78/360)] - 3.47
= Fair Value of Futures (Final)	= 1156.68
19:21 trader1023: cool
19:24 Nube: What operation is brackets? 1146 [1+.057 (78/360)]
19:25 Nube: Thanks, Mobius. Maybe eventually I'lll even figure out what to do with that volatility stat
19:25 Nube: "start paying attention now" seems obvious
19:29 DMonkey: multiplication in this case
19:30 bigworm: its foggy out
19:30 bigworm: and I dont have a scarf
19:30 DMonkey: has been all day
19:30 bigworm: can you program me some heat?
19:31 bigworm: are you really here mobius or are you just joking about it
19:50 admin_bkTOS: 
This is a reminder that the thinkorswim chat rooms will be closing in 10 min.  Forum hours are from 5am-8pm CT Monday-Thursday, and 5am-5pm CT on Friday. Please finish your conversations before 8pm CT.
19:51 sam113355: hi how do i create a study alert for vwap
19:52 sam113355: like if a stock hits a bottom vwap, i get an alert.
20:00 admin_bkTOS: 
Thank you for using thinkorswim.  Chat Rooms are available daily from 5am-8pm CT Monday-Thursday, and 5am-5pm CT on Friday for open discussion on the markets and trade related content 
TOS platform questions?  email: support@thinkorswim.com
or check out the Learning Center, full of demos on how to use thinkorswim trading and charting tools:  http://tlc.thinkorswim.com 
------- Tuesday, October 23, 2018 -------
06:16 Nube: Bounced again right where M suggested. Looks constructive since.
06:26 slashgw: gm all
06:26 Nube: Don't get me wrong though, I'm still hoping for cheaper stocks
06:26 Nube: morning, slash.
06:31 JohnnyQuotron: Let's get ready to rumble....
06:32 JohnnyQuotron: Flash morning update: ugly everywhere; no "new" news but prior negatives weighing on
sentiment; despite awful price action today, ~2700 should be support in SPX (cycle is
peaking, but not collapsing); CAT/MMM/UTX earnings BMO and TXN AMC.
07:25 G81moyano: Hey folks.
Do you have by chance some study/script developed to identify the % of the GAP in PM/AM? if so could you share it ???
07:26 slashgw: gap is popular recently
07:26 G81moyano: in fact yes...
07:27 MTS1: How do you calculate that G8; what bars are you looking at? Is this a scan or indicator of % on a chart?
07:29 Mobius: GM all - Big picture note: If this area of support fails the next lower area is 2600 / 2620 the lower end of the trading range that started in Feb and ended in the breakout in July
07:29 MTS1: Thanks Mobius!
07:31 Mobius: There's a study on MyTrade that plots the Gap Box.
07:32 Mobius: you could plot a line at Midnight to see if the gap was larger in the morning trade or evening
07:42 Nube: That would be even better prices than I had hoped for. *greedily rubs hands together*
07:54 colorado-cliff: Does anyone know if I can read an external file (e.g. an XML file) from within a Script?
07:55 AlphaInvestor: No you cannot
07:55 MTS1: Colorado nope; you'd have to hard-code data in the script
07:55 Bossladyevy: GM new here any advice?
07:56 colorado-cliff: @MTS1 - thx. that's what I was afraid of. I have some price levels that I want to draw lines on every day. You've confirmed that I'm out of luck...and just need to do it manually instead of using a simple study file
07:59 MTS1: Boss; yes review tlc.thinkorscript.com to get started; there's TS tutorials there, and a referene to find indicators or propper syntax. Also tutorials for TOS if you're new to TOS.
------- Monday, October 22, 2018 -------
08:00 MTS1: Colorado; it can be done in a script. You just have to put the levels in per ticker accordingly. I've seen long term support/restance / fib line scripts that are hard-coded to the levels. Once you have the syntax probably easiest to build the script in XCel.
08:02 slashgw: colorado, where is your data originating?  the lines you are talking abot?
08:02 MTS1: Boss; the 'help with thinkscript' button in the editor also brings you straight to the reference, and usually any help button in TOS brings you to the appropriate tutorial page for that window.
08:04 MTS1: you scared him away slash;)
08:04 slashgw: oops.  sorry
08:04 Billions: Hi everyone does anyone have an auto fib retracement study they can share
08:05 slashgw: does it have to work?
08:05 Billions: lol of course
08:06 slashgw: hmm, okay.   that is a tough one then.
08:06 Billions: ok antbody help
08:06 slashgw: probably you can find something for use on larger timeframe.  Mobius probably has one.
08:06 Billions: tired of keep srawing them in tos
08:07 slashgw: but problem is, imo nobody has written one that works in the same methodology as how they actually trade
08:07 MTS1: Billions; Fib lines are easy to draw / calculate; the key is identifying the 0 / 100 levels; how do you logically define them?
08:08 Billions: i dont see him in the room today
08:08 MTS1: I'd look at the fractal pivots script on Mobius' MyTrade or find something that works for you for that; then add in the fib plots.
08:08 slashgw: he was here about 30 min or so ago
08:09 Billions: ok thank you ill look
08:09 slashgw: here is one that he did http://tos.mx/ZpZ9LU#
08:10 Grasul: You could use highest high (or close) and lowest low (or close) over whatever you consider to be a "long" time period.  Or keep track of particularly prominent high or low pivot points.  "Give me the last high pivot that was at least a 9 period high and the comperable low, or something like that.
08:10 slashgw: I would be interest to work with one of the better scripters here to put together one that works in the same way they are traded, if the process is able to be replicated.
08:10 Billions: ok thank you guys
08:12 slashgw: and when I say "better", I mean better than I.  I could provide the flowchart portion, but not the coding part.
08:12 Billions: @slashgw thats cool
08:13 Wally: Auto_Fib_linus, # Auto Plotted Fibonacci Study
# Mobius   http://tos.mx/gRudhk#        http://tos.mx/4jY9T7#
08:14 Mobius: The best fib study I've seen is tied to a stochastic index. That was designed by one of the better teachers from Shadow Trader. He uses it in Forex trading. The study is posted on MyTrade
08:15 slashgw: is it different than the one that I posted of yours?
08:15 AlphaInvestor: Your Mytrade?
08:15 Mobius: yes Alpha.. I wrote the code
08:15 slashgw: DH's morning screen:  https://screencast.com/t/ddzT2YooJ9
08:16 Billions: hi mobius thanks where do u get mytrade
08:17 Mobius: Bill... Right click my Name in the list of names on this chat then View Users Profile
08:20 Billions: ok gotcha thanks
08:58 hguru: Mobius what is the name of that study thx
09:02 Mobius: hg.. it's one of the studies that you have to cick on the link to see the description of. Maybe 2 or 3 down from where those start.
09:03 MTS1: "Stochstic Pivots with Fibocacci Lines"
09:03 MTS1: posted in Feb this year it looks like
09:07 JohnnyQuotron: http://tos.mx/zU09X3# to save time
09:09 Mobius: I like to push people to MyTrade because they may find studies they can use without the need to ask in here
09:10 Mobius: I will post 5 more studies and I'm done.
09:10 JohnnyQuotron: And because you know none of us has monkeyed with them?
09:14 Paris: hguru - I'm sure you already have most of the studies that Mobius had posted. Look up your inventory for a study called Gap Box.
09:16 Joebone87: hey guys.. been a while since I looked at my scripts that reference futures... I have seen some of you talk about a change in how TOS calls on them in scripts..  Im looking at my /VX futures curve and noticing that I am no longer referencing correctly.. what was the change?
09:17 JohnnyQuotron: if you are new to that stochastic pivot study, as I am, in its default config it requires 78 bars of data to paint the fibs.  No fibbin. :()
09:18 MTS1: check the name of the /vx symbol in your chart window header, and update the script.
09:18 MTS1: ^Joe
09:19 Joebone87: k thanks
09:20 Mobius: Johnny... You can use whatever lenght you wish. But a fast Stochastic of say 10 bars is going to plot Fibonacci Lines pretty close together.
09:22 hguru: Paris you are probably correct I have lots of them. Just wasnât sure about that stoch one
09:22 Joebone87: MT.. so if i understand.. it looks like they changed futures to include the 10's spot on the year as well?
09:23 Joebone87: so /VXJ8 went to /VXJ18?
09:24 Mobius: trend starting to look  like a Missouri Boat Ride.
09:26 Mobius: contracts getting ready for /ES**20
09:26 MTS1: I believe so Joe; or /VX:XCBF it looks like to me for the continuous
09:27 MTS1: There's more info in the release notes for the prior to last release, or put them on a chart and check the window header:  
09:30 Joebone87: thanks MT
09:31 MTS1: yw
09:37 JohnnyQuotron: mobius... understood.  Thank you.  
09:38 cajun: Mobius, whats a Missouri boatride like?
09:39 MTS1: You'd thnk a fellow Cajun would know;)
09:40 Mobius: cajun - Dead men floating down river
09:43 Loew: looking for a thinkscript to scan ETF's with Treasuries yielding 5% or greater
09:45 MTS1: no scan based on ETF Holdings in TOS
09:46 cajun: Mo, lol .... yep we gots lots othem today
09:59 Loew: that's what I was thinking. Thanks for confirming MTS1.
10:08 hguru: Paris I do not have that Gap Box study I might have missed it
10:12 Mobius: hg.. Here is the Gap Box Study
http://tos.mx/mkEvEs#
10:14 hguru: Thx
10:15 Mobius: yw
10:15 Mobius: Down to 3 posts more and I'm done
10:16 MTS1: Oh; what's a 100 more between friends?
10:17 Mobius: Need about 21 more followers. Make it a round 1000 and 100 studies.
10:18 MTS1: you're not ready to retire yet are you? Concerned what would happen if you stopped trading / coding;)
10:18 Mobius: /ES Volume today is pushing 2x of the 5day avg.
10:19 Mobius: MTS1 - Time for a walkabout.
10:34 JohnnyQuotron: I've only been on a "DuckBoat" once.  It was a horrible ride even on a calm day. 
10:36 JohnnyQuotron: Tales From the Dark Side...US stocks are getting hit across the board following another morning of downbeat earnings (the SPX was down ~8.5% peak-to-trough from the recent ~2940 high although has bounced off the Tues low in part due to sanguine remarks from the CAT call which began at ~11amET). The only thing that matters for this market is earnings and the CQ3 season continues to disappoint. On an absolute basis numbers are fine and EPS estimates are âbeatingâ the St print consensus but this doesnât capture 1) how all the various figures compare to expectations and 2) the myriad nuances of each individual report. In the medium and long-term: the 2019 EPS consensus isnât necessarily imperiled and remains around ~$177-179 and based on that the PE is increasingly attractive at ~15-15.5x. However, if â20 EPS doesnât increase from â19 (i.e. if âpeakâ concerns grow more pronounced) then the PE may not have material upside potential.
10:40 cajun: Mobius, your followers are so devoted, each of us is worth about 50 no 100 of anothers follower
10:45 inbuffalo: Need 1 less folowwer
10:45 DMonkey: Lol. Mobius will 100 be the nn....?
10:47 bigworm: does he relase srudies the move followers he has lol
10:49 Paris: In case anyone else was wondering, the Gap Box that Mobius posted above is a revised version from the version he posted in August 2017. I'm tagging this as V3 in my archives.
10:51 Paris: Time for some shut eye. Later folks
10:51 JohnnyQuotron: Nite Paris...
10:51 dokk408: im trying to use GetMarketMakerMove but it returns NA... anyone know how to get it working?
10:53 Nube: Missouri boat ride. A fact known to is northerners is that the Mississippi River south because Iowa sucks.
10:54 Nube: Bah, Missouri sucks. Another blown joke.
11:09 MTS1: Dokk; MMM may only be around upcoming events; try a ticker that has earnings coming up
11:11 hguru: Paris thx for the Gap Box update info
11:25 LAComposerguy: Hi everyoneâ¦. I took a hiatus from trading and am slowly catching up. Did ThinkorSwim ever integrate the Investools Phase 1 and 2 scores into their Scan tools or similar? Is is still the case that the only place to see any Phase score info in Profit Charts?
11:25 Mobius: 
# Market Maker Move 
def PrevClose = close(period = AggregationPeriod.Day)[1];
def MMM = if isNaN(GetMarketMakerMove()) 
          then MMM[1] 
          else GetMarketMakerMove();
def Today = if GetDay() == GetLastDay()
            then 1
            else 0;;
plot upper = if Today
             then PrevClose + (MMM/2)
             else double.nan;
            
plot lower = if Today 
             then PrevClose + (-MMM/2)
     upper.SetDefaultColor(Color.Yellow);
     upper.SetPaintingStrategy(PaintingStrategy.Horizontal);
     lower.SetDefaultColor(Color.Yellow);
     lower.SetPaintingStrategy(PaintingStrategy.Horizontal);
addLabel(1, "MMM " + MMM + "  Upper " + Upper + "  lower " + lower);
11:31 Mobius: LA... My understanding is that TDA is absorbing InvestTools so whatever they have of interest should still be available.
11:32 LAComposerguy: @Modius... yeah... but they  said that like a year ago... doing a search now... there may be a gadget they added.
11:32 AlphaInvestor: LA - you can add Phase Scores as a left side bar Widget
11:33 Mobius: "of interest" may mean TDA found no interest in those indicators
11:33 AlphaInvestor: You can add the Widget, but it needs to be configured
11:33 LAComposerguy:  
11:34 LAComposerguy: Found it... THanks
11:34 LAComposerguy: Now... I wonder if there is API access to those numbers
11:35 Farmin: do you see them in the thinkScript manual?  no wondering allowed.
11:37 Farmin: they are also accessible on a tab on the right side of the charts
11:37 LAComposerguy: @Farmin... looking now... a lot of catching up to do. Thanks. Although a quick llok shows that the numbers are not the same as what would seem are the "correct" scores in Profet charts
11:41 Farmin: 'a man with mulltiple watches......"
11:44 LAComposerguy: From a cursory look, seems like the Gadget Phase scores don't register.
11:44 LAComposerguy:  
11:44 LAComposerguy: VS.... the Profet Chart scores:
11:45 LAComposerguy:  
11:46 LAComposerguy: fingers crossed.
11:47 AlphaInvestor: Like I said, you need to configure it
11:47 AlphaInvestor: if you figure out the configuration stuff, Please share it here
11:48 Farmin: I'd suggest contacting Live support or emailing to find out what is going on with Prophet vs other places on the platform or like AI suggests the magical config recipe.
11:50 LAComposerguy: Yeah... I'll dig deeper. Thanks guys. Was wondering if my TIme Frame might impact the numbers... but tried different settings... no dice. Will explore further... speak to tech support. Will post back if there is good news.
12:04 LAComposerguy: Okâ¦ so you can set up your own criteria for create an up or down arrowâ¦ and it will display the score accordingly. Soâ¦ now I have to figure out what the settings were for all the criteria. They really should have an Investools press :/
12:04 LAComposerguy: preset
12:04 AlphaInvestor: /ES outside the ORB again
12:05 AlphaInvestor: find out what the IT preset was, and report back
12:08 IT_Tech: Does anyone have a script for a plot that shows previous day close?  
12:10 LAComposerguy: @Aloha Investor:   
12:11 AlphaInvestor: Thank you!
12:12 LAComposerguy: That's an old article... so I would test it can compare to current Prophet Charts results before blindly following it
12:17 Farmin: still seems support should have up to date criteria for each of the phase scores
12:24 AlphaInvestor: TOS should fill it in with the default InvestTools settings, then let us tweak if we want to
12:24 AlphaInvestor: LA - do you have Phase 2 score criteria?
12:28 LAComposerguy: No... speaking with tech support... they will see if the can get me a preset
12:28 LAComposerguy: :)
12:28 LAComposerguy: Alos... this is intersteing... scroll down: https://tlc.thinkorswim.com/center/release/rel-05-18-2018.html#section_2
12:35 LAComposerguy: Ok.... not great news... this is waht tech support told me: "I was just checking with one of our tech liasons, it doesn't look like we can model the investools setup from the prophet charts directly to the new phase score gadget.
10:34 Admin_Eric_T: Unfortunately some of the phase scores were calculated utilizing investools formulas that were hardcoded into the platform, and the phase score gadget pulls data differently than the prophet charts tool does."
12:36 LAComposerguy: That said, I think we can get very close based on that article I posted above
12:38 Nube: "Hardcoded into the platform" We couldn't possible duplicate it with outside of the that platform. No way, no how.
12:40 Mobius: Translation - Smart guys that coded it for investtools left the company.
12:42 AlphaInvestor: Weren't Prophet Charts (and maybe Phase 1/2 Scores) coded up by somebody outside TOS in the first place and bot by TOS?
12:43 Vimes: i thought autochartist
12:45 Mobius: One thing to buy a company, another to think that purchase includes the brain in the back room sitting over a keyboard. The folks taking the credit and the ones doing the work are rarely they same people in my experience.
12:47 Mobius: And in this business I have seen that and do still see it first hand.
12:47 Mobius: Just wait a few weeks and you will see it again  :)
12:47 LAComposerguy: I think I still have my notes for YEARS ago about the formuls usefd for Phase 2... which is the issue here. Phase 1 is not the issue
12:48 LAComposerguy: If I find them and can cobble together something, I'll let you all know
12:50 Nube: That reads a lot like hint.
12:51 LAComposerguy: I also asked about Big Chart integration... Nope... not gonnas happen. I asked about  EOD money flow ranking... no answer
12:52 LAComposerguy: Anyway... this Phase 1 & 2 business is better than nothing I guess.
13:01 alx: Hello, Does custom study alerts slow down the TOS app?
13:02 Vimes: not thati i've seen
13:06 Mobius: Custom studies as a whole slow down the platform. Very large studies or a lot of them make a real difference.
13:07 Vimes: i assumed the alerts are kept server side, else how do i get them on my phone?
13:07 Mobius: custom study alerts was asked about - not marketwatch alerts
13:07 Vimes: gotcha
13:10 reconranger: Hi anyone have the code for MACD_Mmultiple time frames_msb (12,26,9) ten-min-fifteen. Thanks
13:11 Vimes: er, what?
13:11 amalia: Wants 3 MACDs in a single study
13:12 amalia: 1m/10m/15m perhaps?
13:16 reconranger: Yes 1m/10/15m
13:19 Vimes: Here is one that has been shared in the past, i can't vouch for it as i've never used it:
#FibKing Creations
#FibKingTrading.com
#www.fibkingtrading.com
input midTermPeriod = {"1 min", "3 min", "5 min", "10 min", "15 min", "30 min", "60 min", "120 min", "Daily", default "Weekly", "Monthly"};
input longTermPeriod = {"3 min", "5 min", "10 min", "15 min", "30 min", "60 min", "120 min", "Daily", "Weekly", default "Monthly"};
input fastLength = 12;
input slowLength = 26;
input MACDLength = 9;
input midTermFastLength = 12;
input midTermSlowLength = 26;
input midTermMACDLength = 9;
input longTermFastLength = 12;
input longTermSlowLength = 26;
input longTermMACDLength = 9;
def middleAggregation;
switch (midTermPeriod) {
    case "1 min":
        middleAggregation = AggregationPeriod.MIN;
    case "3 min":
        middleAggregation = AggregationPeriod.THREE_MIN;
    case "5 min":
        middleAggregation = AggregationPeriod.FIVE_MIN;
    case "10 min":
        middleAggregation = AggregationPeriod.TEN_MIN;
    case "15 min":
        middleAggregation = AggregationPeriod.FIFTEEN_MIN;
    case "30 min":
        middleAggregation = AggregationPeriod.THIRTY_MIN;
    case "60 min":
        middleAggregation = AggregationPeriod.HOUR;
    case "120 min":
        middleAggregation = AggregationPeriod.TWO_HOURS;
    case "Daily":
        middleAggregation = AggregationPeriod.DAY;
    case "Weekly":
        middleAggregation = AggregationPeriod.WEEK;
    case "Monthly":
        middleAggregation = AggregationPeriod.MONTH;
def highestAggregation;
switch (longTermPeriod) {
        highestAggregation = AggregationPeriod.THREE_MIN;
        highestAggregation = AggregationPeriod.FIVE_MIN;
        highestAggregation = AggregationPeriod.TEN_MIN;
        highestAggregation = AggregationPeriod.FIFTEEN_MIN;
        highestAggregation = AggregationPeriod.THIRTY_MIN;
        highestAggregation = AggregationPeriod.HOUR;
        highestAggregation = AggregationPeriod.TWO_HOURS;
        highestAggregation = AggregationPeriod.DAY;
        highestAggregation = AggregationPeriod.WEEK;
        highestAggregation = AggregationPeriod.MONTH;
DefineGlobalColor("UpTrend", color.GREEN);
DefineGlobalColor("DownTrend", color.RED);
DefineGlobalColor("NoTrend", color.LIGHT_GRAY);
def timeFrame = getAggregationPeriod();
def testTimeFrames = if timeFrame < middleAggregation and middleAggregation < highestAggregation then yes else no;
AddLabel(yes, if testTimeFrames  then "Allgood" else "Check Settings", if testTimeFrames  then color.GREEN else color.RED);
# This section is for the chart level MACD
def fastAvg = ExpAverage(close, fastLength);
def slowAvg = ExpAverage(close, slowLength);
plot Value = fastAvg - slowAvg;
Value.SetDefaultColor(color.CYAN);
plot Avg = ExpAverage(Value, MACDLength);
Avg.SetDefaultColor(color.YELLOW);
plot Diff = (value - avg)*3;
# This section is for the medium term MACD
def midTermFastAvg = ExpAverage(close(period = middleAggregation) , midTermFastLength);
def midTermSlowAvg = ExpAverage(close(period = middleAggregation) , midTermSlowLength);
def midTermValue = midTermFastAvg - midTermSlowAvg;
def midTermAvg = ExpAverage(midTermValue, midTermMACDLength);
plot midTermDiff = (midTermValue - midTermAvg)*3;
midTermDiff.Hide();
midTermDiff.HideBubble();
# This section is for the long term MACD
def longTermFastAvg = ExpAverage(close(period = highestAggregation) , longTermFastLength);
def longTermSlowAvg = ExpAverage(close(period = highestAggregation) , longTermSlowLength);
def longTermValue = longTermFastAvg - longTermSlowAvg;
def longTermAvg = ExpAverage(longTermValue, longTermMACDLength);
plot longTermDiff = (longTermValue - longTermAvg)*3;
longTermDiff.Hide();
longTermDiff.HideBubble();
def midTermLower = midTermDiff < midTermDiff[1];
def midTermHigher = midTermDiff > midTermDiff[1];
rec midTermSignal = if midTermLower then  yes  else if midTermSignal[1] == yes and midTermHigher == no then yes else no;
#plot test = midTermSignal;
def longTermLower = longTermDiff < longTermDiff[1];
def longTermHigher = longTermDiff > longTermDiff[1];
rec longTermSignal = if longTermLower then  yes  else if longTermSignal[1] == yes and longTermHigher == no then yes else no;
midTermDiff.AssignValueColor(if midTermSignal then color.RED else color.BLUE);
longTermDiff.AssignValueColor(if longTermSignal then color.RED else color.BLUE);
Diff.AssignValueColor(if Diff > Diff[1] and midTermSignal == no and longTermSignal == no then GlobalColor("UpTrend") else if Diff < Diff[1] and midTermSignal == yes and longTermSignal == yes then GlobalColor("DownTrend") else GlobalColor("NoTrend") );
Diff.SetPaintingStrategy(PaintingStrategy.HISTOGRAM);
Diff.SetLineWeight(3);
plot zeroLine = if close[-1] > 0 then 0 else Double.Nan;
zeroLine.AssignValueColor(if Diff > Diff[1] and midTermSignal == no and longTermSignal == no then GlobalColor("UpTrend") else if Diff < Diff[1] and midTermSignal == yes and longTermSignal == yes then GlobalColor("DownTrend") else GlobalColor("NoTrend") );
zeroLine.SetPaintingStrategy(PaintingStrategy.POINTS);
zeroLine.SetLineWeight(3);
13:19 AlphaInvestor: be late at 3 aggregations ...
13:21 reconranger: Thanks, will test it out
13:24 gofast992: Hello, I am working on a code which can plot the highest value of a moving average.
Where I was thinking about myself was:
IF Thiscandle > Thiscandle[1] {
	high = Thiscandle   }
ELSE {
	high = Thiscandle[1]   }
but this wont plot the highest value of all candles, only out of two candlebars. So I think it has to do something with n=n+1.
I dont see it, I hope someone can help me here with this "simple" code
 Thank you!
13:25 Vimes: highest(high,n);?
13:26 gofast992: Vimes does that work for getting the highest value for a SMA?
13:27 Farmin: or highestall().     the manual is your friend
13:27 Vimes: highest(sma,n); or highestall(sma.....)
13:28 AlphaInvestor: Gofast - go slower ... one of the rules in thinkScript is .... You Cannot Make Up Your Own Syntax
13:28 gofast992: ok so for highestall( Here I put the value I want to plot?)
13:29 Vimes: look in the manual for the syntax
13:29 Vimes: or just start coding it the editor will tell you the xyntax
13:30 AlphaInvestor: DEF hi = if thiscandle > thiscandle[1] then high else hi[1];   # assuming thiscandle is already defined
13:30 AlphaInvestor: note high is a reserved word and may be messing you up too
13:31 Vimes: that works too
13:31 Farmin: many ways to scale a fish
13:31 LAComposerguy: Did someone still need a prev day close script? I've got one I wrote a long time ago.. works a treat
13:33 gofast992: thank you guys I try to mess around witht the codes you gave
13:35 AlphaInvestor: Overall, the 56 options positions I have are green for the day. Amost all of todays losses are in the Oily's
13:35 LAComposerguy: I've gotta run. For whoever was aking for the Prev Day Close script.. her one for you... will only show up on intraday charts:
13:35 LAComposerguy: input aggregationPeriod = AggregationPeriod.DAY;
input length = 1;
input displace = -1;
input showOnlyLastPeriod = no;
plot PrevDayClose;
if getAggregationPeriod()>= AggregationPeriod.DAY or showOnlyLastPeriod and !IsNaN(close(period = aggregationPeriod)[-1]) {
    PrevDayClose = Double.NaN;
} else {
    PrevDayClose =  Highest(close(period = aggregationPeriod)[-displace], length);
PrevDayClose.SetDefaultColor(GetColor(9));
PrevDayClose.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);
addLabel(yes, "Prev Close: " + highest(close(period = AggregationPeriod.DAY)[1], 1), color.WHITE);
13:36 Mobius: Fastest way to scale a fish - throw it through a tree chipper.
13:37 ed_nn: Mobius MMM script from earlier, why adding (subtractiong) MMM/2 and not MMM in either direction? Have any compared MMM with 85% of ATM Straddle or (straddle + first OTM strangle)/2?  
13:37 Vimes: I tend to want to se the prior highs and lows of the higher time frame candles versus the prior close so here i something i often have on one of my charts to watch:
#Plot higher aggregation candles High and Low as S/R lines
#Vimes
plot moL = low(period = AggregationPeriod.MONTH)[1];
plot moH = high(period = AggregationPeriod.MONTH)[1];
plot wkL = low(period = AggregationPeriod.WEEK)[1];
plot wkH = high(period = AggregationPeriod.WEEK)[1];
plot dL = low(period = aggregationPeriod.DAY)[1];
plot dH = high(period= aggregationPeriod.DAY)[1];
plot dL0 = low(period = aggregationPeriod.DAY);
plot dH0 = high(period= aggregationPeriod.DAY);
moL.setdefaultColor(Color.PINK);
moL.SetPaintingStrategy(paintingStrategy = PaintingStrategy.HORIZONTAL);
moL.setlineweight(1);
moH.setDefaultColor(Color.PINK);
moH.SetPaintingStrategy(paintingStrategy = PaintingStrategy.HORIZONTAL);
moH.setlineweight(1);
wkL.setDefaultColor(color.darK_ORANGE);
wkL.SetPaintingStrategy(paintingStrategy = PaintingStrategy.HORIZONTAL);
wkL.setlineweight(2);
wkH.setdefaultColor(color.dark_orange);
wkH.SetPaintingStrategy(paintingStrategy = PaintingStrategy.HORIZONTAL);
wkH.setlineweight(2);
dL.setdefaultColor(color.white);
dL.SetPaintingStrategy(paintingStrategy = PaintingStrategy.HORIZONTAL);
dL.setlineweight(3);
dH.setdefaultcolor(color.white);
dH.SetPaintingStrategy(paintingStrategy = PaintingStrategy.HORIZONTAL);
dH.setlineweight(3);
dL0.setdefaultColor(Color.YELLOW);
dL0.SetPaintingStrategy(paintingStrategy = PaintingStrategy.HORIZONTAL);
dL0.setlineweight(3);
dH0.setdefaultcolor(Color.YELLOW);
dH0.SetPaintingStrategy(paintingStrategy = PaintingStrategy.HORIZONTAL);
dH0.setlineweight(3);
13:40 Mobius: ed... Why ask why?  You can change a shared code any way your little heart desires.  Since Market Maker Move is non-directional I decided to add 1/2 both ways. You don't like that change it
13:42 Mobius: As to your second question - Yes I also coded MMM using options. The one posted is more reliable since TOS drags it's data with regards options push to thinkScript
13:44 gofast992: Thank you guys, got it to work with Lowestall and highest all, thank you very much!
13:45 LAComposerguy: THanks Vimes!
13:48 ed_nn: Thanks Mobius, I thought I was missing some hidden wisdom nugget ... I did try SeriesVolatility. I get wide variances in results for various approaches. I wondered if there is any study out threre (cyberspace) that established some statistics for the various expected/implied moves.  
13:49 Mobius: Series Vol  is the Implied Volatility for each individual series so each Implied Move is calculated for those Days remaining till that series expiration
13:53 cajun: the SPX  gap is Closed
13:56 Vimes: yep what a day
13:57 AlphaInvestor: /ES touched T2 from the ORB ... then reversed, still above T1
13:58 ed_nn: Even if SeriesVolatility(1) is one day from expiration, it still not MMM (should subtract Theta?). Presumably it is the OTM  IVs average which is much higher than ATM IV (like ATM straddle). Anyway, thank you, I need to do some homework.  
14:01 AlphaInvestor: TOS will not tell us all the details on the MMM calculation ... but we can get close
14:01 Mobius: Series Vol is calculated using a Binomial Tree
14:03 ed_nn: Tahnk you Alpha, Mobius
14:06 gofast992: Right now I have a code in scanner:
NewStudy15() is less than -10
Now it seems the scanner shows stocks from even3 days, is there a way to let it show only stocks from since today
14:06 gofast992: im scanning on 5min timeframe
14:07 Vimes: i can't make sense of that , do youwant to post your code
14:07 AlphaInvestor: Third time is a charm - hit T2 twice, trying again to break thru
14:08 Vimes: gofast, i guess one thing that might be a problem is why scan on a 5min time frame if you want daily results?
14:09 gofast992: because im scanning for 5minute extensions
14:09 Farmin: goslower  the scanner is simply showing you what is matching the criteria you specified
14:11 gofast992: yes I understand it shows what I specified, so how can I specify in the code it only gives data from the day I scan?
14:11 Vimes: i still have no idea what you are scanning for
14:11 Vimes: so not able to help you
14:11 gofast992: #variables
def lod1;
def hod1;
def neut;
def smaout;
# calculations
# low
lod1 = (((low - SimpleMovingAvg("length" = 20)."SMA") / low) * 100);
#High
hod1 = (((high - SimpleMovingAvg("length" = 20)."SMA") / high) * 100);
#neutral
neut = (((close - SimpleMovingAvg("length" = 20)."SMA") / close) * 100);
if close > SimpleMovingAvg("length" = 20)."SMA" {
    smaout = hod1;
    smaout = lod1;
def lodperc= LowestAll(smaout);
plot SMA = lodperc;
14:11 gofast992: This is the code Vimes
14:12 gofast992: its a percentage away from moving average
14:12 gofast992: so I scan for this study with a value -10
14:13 gofast992: <-10
14:14 Farmin: go read what a SMA is.  it is not a DMA if you are scanning at a 5m aggregation.
14:17 Farmin: hint:  take your code and put it on a chart and see what it is really doing.
14:18 Vimes: I'm not reading your code very well you want to know in the current day if closed below the moving average by a certain %, ther eis already a built in scan for that - see moinvg averge scan
14:19 Vimes: if you want the vent to only be during the day, you can't use lowest all as it will see past the current day
14:19 Mobius: gofast - scan results are for the current forming bar of whatever aggregation your scanning in. If you want to include results from previous bars use the command   "within x bars"
14:21 gofast992: Thank you guys, will try to figure it out
14:21 Vimes: or you could do as mobius says low crosses below sma*0.9 ....
14:26 Nube: Going to take guts to fade this candle
14:26 Vimes: you first
14:27 AlphaInvestor: /ES fighting to get thru T2
14:28 Nube: I very well could, Vimes. World is still red.
14:29 Vimes: pretty darn bullish candle but who the heck knows, we gotta clear alot of junk if the bulls are going to win
14:30 MTS1: volatile candle; but still lower high and lower low.
14:31 Farmin: $TIKSP not headed to the moon
14:37 Nube: Still one heck of a candle, can't imagine anyone would be surprised to see this low hold
14:46 AlphaInvestor: Well there are some peeps in other chat rooms who think this is but a head fake (not their words)
14:57 MTS1: sure does feel like a short squeeze; but if that's what the peeps think is that the herd? (I'm too often part of the herd;))
15:02 poseidon77: Hi all... need some help showing a line for my current position price.... I have the following script:
15:02 poseidon77: def x = GetAveragePrice();
plot Data =  if x > 0 then x else close;
15:03 poseidon77: can someone help me?
15:07 Nube: first do you have an open position k. that ticker and secondly are you on an aggregation that works with the portfolio functions?
15:08 poseidon77: @Nube yes, and yes
15:08 poseidon77: @Nube its actually working but I need two improvements
15:09 poseidon77: @Nube is there a way for a line plot to plot nothing when I don't have a position; ie instead of plotting 0 and me having to re-zoom again
15:09 hguru: Reconranger here is a MACD MTF written by Nube awhile ago check it out or modify it MACD_MTF_Nube http://tos.mx/hfU1rX# This will allow you to put a MACD of a different symbol on the current chart example. /CL on a 5 min chart with the MACD of the /DX at 5 min or any other time agg above the 5 min
15:10 hguru: Or on the same chart of a 5 min and show a 15 min for example
15:10 dokk408: anyone know how to get the implied volatility of a single option...specifically, im looking for the ATM option that expires on the Friday after earnings.  
15:12 dokk408: btw, thanks to Mobius for help with GetMarketMakerMove()
15:15 amalia: yw
15:19 poseidon77: @amalia can u help me with a simple script plz?
15:19 amalia: shoot
15:20 poseidon77: I'm trying to plot a line showing my avergae position price
15:21 poseidon77: Here' what I've done so far:
def x = GetAveragePrice();plot Data =Â  if x 0 then x else close;
the above plots my average price correctly, and then tracks the close price when I don't have a position (instead of plotting 0). I did that in order to avoid having to re-oom everytime my poisition is zero so plot the current price instead of zero.
15:21 poseidon77: 1. is there a way to plot "nothing" when I have no position (instead of averageprice of 0)?2. is there a way to plot a horizontal line equal to only my last average price instead of the whole sequence?
15:21 amalia: exit the room and re-enter please
15:21 poseidon77: ok
15:22 poseidon77: done
15:22 amalia: Use Double.NaN
15:22 poseidon77: doesnt work :(
15:22 poseidon77: if I use Double.NaN; doesn't plot anything at all
15:23 amalia: Try something like "...if GetAveragePrice() <1 then Double.NaN else..."
15:23 Nube: What is your average price on a stock you don't own?
15:23 Nube: if IsNaN()
15:23 JohnnyQuotron: With all of the fun I was having this moring I failed to capture the "banter" from the open of the Lounge until 8:56 am eastern.  And email or PB would be appreciated.
15:23 JohnnyQuotron: And = an
15:24 Nube: I haven't tried it but I don't see why it would plot anything if you didn't have a position
15:24 Nube: Have you tried plot line = GetAveragePrice()
15:25 poseidon77: nope. lemme try that
15:25 poseidon77: oh....yes
15:26 poseidon77: i tried plot data = GetAveragePrice()
15:26 poseidon77: its the same thing right...just a diff variable name right?
15:27 poseidon77: @Nube average price is 0 if there is no position
15:28 amalia: That's why I gave you that example earlier.
15:29 amalia: plot PurchasePrice = if GetAveragePrice() == 0 then Double.NaN else GetAveragePrice();
15:30 poseidon77: @amalia @nube Double.NaN is working now.... (I could've sworn it didn't work a few minutes ago !!!)
15:30 reconranger: Thanks HGURU
15:30 poseidon77: @amalia @ nube one more thing puhleez
15:31 poseidon77: is there a way to plot a horizontal line showing just the current average price (instead of a all my average price; ie lock only to the last nonzero price?)
15:32 MTS1: yep; use close[-1]
15:32 MTS1: and IsNan() Nube gave you earlier
15:34 poseidon77: @MTS 1 close[-1] ?? I'm trying to plot GetAveragePrice()
15:35 Nube: highestAll and the use an if then the specify the current bar
15:35 MTS1: plot PurchasePrice = if IsNan(close[-1] and GetAveragePrice() > 0 then  GetAveragePrice() else Double.NaN;
15:36 amalia: JQ, you around?
15:36 MoMo: Is Mr. Script doing a webinar ?
15:38 Farmin: look it up, Education tab/webcasts
15:39 MTS1: Pose; you use IsNan and Close[-1] to determine you're on the right side of the chart as you requested. More specifically !isNaN(close) and IsNaN(close[-1]) is the last / current bar.
15:42 poseidon77: @MTS1 sorry....imma bit slow here :) .... I copied/pasted the lines you sent and it doesn't work. all red.
15:42 poseidon77: could u try it?
15:43 amalia: Missing )
15:44 amalia: IsNaN(Close[-1])
15:47 MTS1: just typed in chat; just explaining the logic. Did you follow the logic?
15:50 poseidon77: @amalia I tried that....not plotting
15:51 poseidon77: @MTS1 its not plotting anything
15:51 amalia: What's the error reason
15:52 MTS1: you can fix the syntax if you understand the logic; these are just examples: Do you follow the logic or do you have a question about any portoin what it means?
15:53 poseidon77: @amalia @MTS1 oooooh....got the problem....cuz now there is no current position so nothing to plot.... should work one I have a position
15:53 poseidon77: ok....so couple more things pleeez :)
15:54 amalia: If we stop replying, you can stop requesting.
15:54 poseidon77: is there a way to plot a horizontal line (ir extended right and left, as if it is a price level marker versus starting from the position opening ?)
15:55 poseidon77: @amalia thanks sooo much :)
15:55 fibfibfib: Hi guys, how do i add a label/bubble to a pivot line to show its S1,S2,S3,R1,R2,R3,pp on the SVE indicator. I got confuse which line is which when there are so many lines.
15:56 poseidon77: also....can i give the line a green color when the position is long and red when position is short (ie -ve quantity)
15:56 poseidon77: ?
15:57 amalia: fib, I would take all lines off your chart until you can tell me how each line is making you money.
15:58 amalia: pos, last item there can be solved by looking at the AssignValueColor() function.
15:58 Farmin: and while you're at it, explain the difference between a label and bubble
15:58 amalia: ha
16:00 fibfibfib: when there are confluences with multiple pivot lines, it adds as a stronger signal. But because there are mutliple lines, i can't tell if its S2 or S3 so if i add a label that read S2 or S3 then I know we might be bottoming
16:01 amalia: Have you looked at the AddLabeL() function?
16:01 fibfibfib: no
16:02 amalia: Might want to start there.
16:03 Farmin: and compare/contrast with AddChartBubble()
16:03 fibfibfib: # Regions of support and resistance
input timeFrame = {default DAY, WEEK, MONTH};
input showOnlyToday = yes;
input DynamicHide = yes;
input zone=1.5;
input showMidpoints = no;
def h = dynamichide;
def m=showMidpoints;
def na=double.nan;
# Define lclose = last completed bar close:
#rec lclose = if IsNaN(close[-1]) then close else lclose[1];
def lclose=close;
plot R3;
plot R2;
plot R1;
plot PP;
plot S1;
plot S2;
plot S3;
# midpoints
plot r3r2;
plot r2r1;
plot r1pp;
plot pps1;
plot s1s2;
plot s2s3;
if showOnlyToday and !IsNaN(close(period = timeFrame)[-1])
then {
    R1 = Double.NaN;
    R2 = Double.NaN;
    R3 = Double.NaN;
    PP = Double.NaN;
    S1 = Double.NaN;
    S2 = Double.NaN;
    S3 = Double.NaN;
    r3r2=na;
    r2r1=na;
    r1pp=na;
    pps1=na;
    s1s2=na;
    s2s3=na;
    PP = (high(period = timeFrame)[1] + low(period = timeFrame)[1] + close(period=timeframe)[1]) / 3;
    R1 = 2 * PP - low(period = timeFrame)[1];
    R2 = PP + high(period = timeFrame)[1] - low(period = timeFrame)[1];
    R3 = R2 + high(period = timeFrame)[1] - low(period = timeFrame)[1];
    S1 = 2 * PP - high(period = timeFrame)[1];
    S2 = PP - high(period = timeFrame)[1] + low(period = timeFrame)[1];
    S3 = S2 - high(period = timeFrame)[1] + low(period = timeFrame)[1];
    r3r2=(r3+r2)/2;
    r2r1=(r2+r1)/2;
    r1pp=(r1+PP)/2;
    pps1=(PP+S1)/2;
    s1s2=(s1+s2)/2;
    s2s3=(S2+s3)/2;
# Formatting:
# Set color, line weight, style and hiding parameters
# for each pivot level
PP.SetDefaultColor(color.gray);
pp.SetLineWeight(4);
pp.SetStyle(curve.long_DASH);
pp.setHiding(h and (lclose > r2 or lclose < s2));
r1.SetDefaultColor(color.red);
r1.SetLineWeight(4);
r1.SetStyle(curve.long_DASH);
r1.setHiding(h and lclose < s1);
r2.SetDefaultColor(color.red);
r2.SetLineWeight(1);
r2.SetStyle(curve.long_DASH);
r2.setHiding(h and lclose < r1);
r3.SetDefaultColor(color.red);
r3.SetLineWeight(1);
r3.SetStyle(curve.short_DASH);
r3.setHiding(h and lclose < r2);
s1.SetDefaultColor(color.GREEN);
s1.SetLineWeight(4);
s1.SetStyle(curve.long_DASH);
s1.setHiding(h and lclose > r1);
s2.SetDefaultColor(color.GREEN);
s2.SetLineWeight(1);
s2.SetStyle(curve.long_DASH);
s2.setHiding(h and lclose > s1);
s3.SetDefaultColor(color.GREEN);
s3.SetLineWeight(1);
s3.SetStyle(curve.short_DASH);
s3.setHiding(h and lclose > s2);
r3r2.setdefaultcolor(color.cyan);
r3r2.setlineweight(1);
r3r2.setstyle(curve.short_DASH);
r3r2.sethiding(h and lclose<r2 OR !m);
r2r1.setdefaultcolor(color.cyan);
r2r1.setlineweight(1);
r2r1.setstyle(curve.short_DASH);
r2r1.sethiding(h and lclose<r1 OR !m);
r1pp.setdefaultcolor(color.cyan);
r1pp.setlineweight(1);
r1pp.setstyle(curve.short_DASH);
r1pp.sethiding(h and lclose<PP OR !m);
pps1.setdefaultcolor(color.cyan);
pps1.setlineweight(1);
pps1.setstyle(curve.short_DASH);
pps1.sethiding(h and lclose>PP OR !m);
s1s2.setdefaultcolor(color.cyan);
s1s2.setlineweight(1);
s1s2.setstyle(curve.short_DASH);
s1s2.sethiding(h and lclose>s1 OR !m);
s2s3.setdefaultcolor(color.cyan);
s2s3.setlineweight(1);
s2s3.setstyle(curve.short_DASH);
s2s3.sethiding(h and lclose>s2 OR !m);
plot ppp=if isnan(close[0]) then na else pp+zone;
plot ppm=if isnan(close[0]) then na else pp-zone;
plot ppp0=ppm;
plot ppm0=ppp;
addcloud(ppp,ppm);
addcloud(ppp0,ppm0);
ppp0.sethiding(if lclose[1]>ppp then 1 else 0);
ppp.sethiding(if lclose[1]<ppm then 1 else 0);
plot r1p=if isnan(close[0]) then na else r1+zone;
plot r1m=if isnan(close[0]) then na else r1-zone;
plot r1p0=r1m;
plot r1m0=r1p;
addcloud(r1p,r1m);
addcloud(r1p0,r1m0);
r1p0.sethiding(if lclose[1]>r1p OR lclose[1]<s1 then 1 else 0);
r1p.sethiding(if lclose[1]<r1m OR lclose[1]<s1 then 1 else 0);
r1m0.sethiding(if lclose[1]>r1p OR lclose[1]<s1 then 1 else 0);
r1m.sethiding(if lclose[1]<r1m OR lclose[1]<s1 then 1 else 0);
plot s1p=if isnan(close[0]) then na else s1+zone;
plot s1m=if isnan(close[0]) then na else s1-zone;
plot s1p0=s1m;
plot s1m0=s1p;
addcloud(s1p,s1m);
addcloud(s1p0,s1m0);
s1p0.sethiding(if lclose[1]>s1p OR lclose[1]>r1 then 1 else 0);
s1p.sethiding(if lclose[1]<s1m  OR Lclose[1]>r1 then 1 else 0);
s1m0.sethiding(if lclose[1]>s1p OR lclose[1]>r1 then 1 else 0);
s1m.sethiding(if lclose[1]<s1m  OR Lclose[1]>r1 then 1 else 0);
ppp.setDefaultColor(color.black);
ppm.setDefaultColor(color.black);
r1p.setDefaultColor(color.black);
r1m.setDefaultColor(color.black);
s1p.setDefaultColor(color.black);
s1m.setDefaultColor(color.black);
ppp0.setDefaultColor(color.black);
ppm0.setDefaultColor(color.black);
r1p0.setDefaultColor(color.black);
r1m0.setDefaultColor(color.black);
s1p0.setDefaultColor(color.black);
s1m0.setDefaultColor(color.black);
ppp.hidebubble();
ppm.hidebubble();
r1p.hidebubble();
r1m.hidebubble();
s1p.hidebubble();
s1m.hidebubble();
ppp0.hidebubble();
ppm0.hidebubble();
r1p0.hidebubble();
r1m0.hidebubble();
s1p0.hidebubble();
s1m0.hidebubble();
16:03 MTS1: actually'; probably want chartbubble to add a bubble to each line
16:04 fibfibfib: here's what i mean working on to see how i can add it along with line
16:05 amalia: poseidon,
#Horizontal AllChart Line
def p = GetAveragePrice();
plot priceLine = Highestall(if IsNaN(close[-1]) then p else Double.NaN);
16:05 fibfibfib: TD Ameritrade IP Company, Inc. (c) 2014-2018
input aggregationPeriod = AggregationPeriod.DAY;
def PH = high(period = aggregationPeriod)[1];
def PL = low(period = aggregationPeriod)[1];
def PC = close(period = aggregationPeriod)[1];
PP = (PH + PL + PC) / 3;
R1 = 2 * PP - PL;
R2 = PP + (PH - PL);
R3 = 2 * PP + (PH - 2 * PL);
S1 = 2 * PP - PH;
S2 = PP - (PH - PL);
S3 = 2 * PP - (2 * PH - PL);
R3.SetDefaultColor(GetColor(5));
R2.SetDefaultColor(GetColor(5));
R1.SetDefaultColor(GetColor(5));
PP.SetDefaultColor(GetColor(0));
S1.SetDefaultColor(GetColor(6));
S2.SetDefaultColor(GetColor(6));
S3.SetDefaultColor(GetColor(6));
R3.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);
R2.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);
R1.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);
PP.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);
S1.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);
S2.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);
S3.SetPaintingStrategy(PaintingStrategy.HORIZONTAL);
16:05 MTS1: Fib; as suggested look at AddChartBubble(); check it out in the reference for the syntax.
16:05 amalia: fib, no, we know the code.
16:05 MTS1: and don't copy built-in indicators in here; we can look up the code in TOS;)
16:10 Vimes: which built in is that?
16:11 amalia: Post @ hh:05
16:14 Vimes: reading helps
16:37 poseidon77: @amalia.... thanks....color works now
16:54 twoshoes: Set it up as Short, Med, Long, and then "Input" values to change in study Properties.
16:55 twoshoes: You'd have to change the variable descriptions down through the study.
16:56 amalia: JQ, when you get on, I need some help.
17:16 daybuck: I was wondering if someone out the could convert a script into thinkscript for me? I don't have a clue how to even start. Thanks
17:21 amalia: The manual is a great start.
17:24 daybuck: Im sure it probably would be for someone that knows how to code but I cant even translate the code I want converted
17:31 amalia: If it's making you money, it's a worthy endeavor to start learning.
17:31 amalia: Else contact someone outside of the chatroom by other means than soliticing in here and pay them to do it for you.
17:32 daybuck: TDA told me this was the place to ask for help
17:36 amalia: You may have better luck coming back tomorrow during regular trading hours and see if anyone wants to help you. Converting is above my paygrade. What's the study? It's probably already in thinkScript.
17:38 daybuck: This is the script...It is pivot points on different timeframes
17:38 amalia: Don't paste it!
17:39 amalia: Stop!
17:39 amalia: Confirm please
17:39 amalia: daybuck!!!
17:39 daybuck: yes
17:39 amalia: Before we get to anything about code or sharing anything...
17:39 amalia: What's it called?
17:39 amalia: What's it do?
17:41 daybuck: As I said before, it is pivot points on different time frames. I dont know what else to tell you
17:43 MTS1: how are the pivots detemined?  I assme you looked at the built-in ones? 
17:44 amalia: daybuck?
17:45 daybuck: yes
17:46 amalia: Can you answer some of the questions we've provided?
17:46 amalia: daybuck, keep up or else we're moving on.
17:49 daybuck: amalia, I have answered the best I know to answer. I don't code so maybe your questions are over my head. I came here for help and nobody has even asked to see the code. Maybe if you look at it you can answer your own questions, unfortunately, I can't
17:50 daybuck: MTS1, the built in ones move on a daily basis. This code doesn't move on a daily timeframe
17:50 MTS1: So what timeframe does it move on?
17:50 amalia: See? There's one answer.
17:51 daybuck: Monthly and weekly
17:51 amalia: Don't limit yourself. You must be able to describe what you trade. We can start by the name...
17:52 MTS1: Most of the built-in ones have settings for that.
17:53 MTS1: Do you know how your script calculates the pivots? Is it using a standard method like the built-in ones or something special?
17:53 daybuck: amalia, explain your question...what do I trade. Not sure what difference it makes
17:54 MTS1: Amalia must have had a bad day; we'd like people to stick around and answer clarification questions and be as specific as they can be.
17:54 amalia: I'm here inquiring and asking questions. I must not care. lol
17:54 daybuck: Guys, don't ask me questions about the script. I cant explain it. Seems it would be much simpler to look at it.
17:54 amalia: daybuck, coders are anal. My bad if you're reading tension through text. Far from the truth.
17:54 amalia: Go ahead then.
17:55 MTS1: OK DayBreak; take a step back then: If you're trading using pivots that you don't understand you may want to revisit your trading plan?
17:55 amalia: There's the disconnect for me. "...don't ask me questions about the script. I can't explain it"
All I hear is, "I don't know how to use this study I want converted."
17:56 amalia: I'm just telling you my thought process. Don't take it personal.
17:56 daybuck: I know how to trade it on another platform but would rather have it on TOS. It just that simple
17:57 amalia: Share the script, daybuck.
17:57 MTS1: you should understand the logic behind the pivots or where they are derived / calculated from; I assume they are not random lines to you. My guess is the built-in ones do what you want already or can be a start, unless you can explain / show how your pivots are calculated differently.
17:58 mcdon0301: hi.  i put a moonphase script together( I know hocus pocus), but having issues. would anyone care to take a look? http://tos.mx/rQvJJd#
17:59 amalia: mcdon0301, here you go
http://tos.mx/J2Xh4V#
17:59 MTS1: There are at least 4 built-in pivot scripts that have slight variations how they are calculated, that all have inputs for day, week, month, or more.
18:00 daybuck: I cant even get it to paste up
18:01 amalia: daybuck, please exit and re-enter the room.
18:01 amalia: daybuck, go to pastebin.com and after you've loaded the code there, share the link here.
18:01 daybuck: ok
18:03 mcdon0301: that was fast.
18:03 MTS1: Suspect it is not the same script if you created one from scratch;)
18:04 MTS1: you can expect moonphase scripts to have issues before a full moon though; may not be your script;)
18:04 amalia: Did you even look at it? lol
18:04 amalia: nvm
18:05 amalia: -_-
18:05 mcdon0301: yes, trying to take a look
18:06 MTS1: I know Alpha has one too; ask him next time he's arround. He's proud off that one!
18:09 JohnnyQuotron: The LoungeArchive is current but for the gap from the open until 8:56am.  Dinner bell''s ringing.  Later gators...
18:14 amalia: Room, I need help as well...
18:15 amalia: I've made a MinRange for Intraday, Weekly and Monthly. Now trying to come up with a Yearly one. This one's mainly for coding practice but seem to be stuck
18:20 FunPilot: Afternoon all.  Crazy day in the market.
18:20 FunPilot: But a decent ending.
18:21 MTS1: What's the problem Amalia?
18:22 MTS1: Fun; that was NOT a fun ending for me. .
18:23 daybuck: amalia, hope this works :https://pastebin.com/RNx5vcWG
18:24 FunPilot: Sorry man.  I lost too, just not as much.  Just trying to look at the positive.
18:26 amalia: MTS1, looking through daybuck's link, looks like a HL3 on MTF?
18:26 amalia: Ok, going back to where I'm stuck...
18:27 amalia: daybuck, the code you shared, is there an author?
18:28 daybuck: I hope that wasn't a trick question....!
18:29 amalia: Someone wrote the script. Characters and syntax didn't just appead. Do you know who did?
18:29 daybuck: Im sure there is but its thru a 3rd party and Im not sure who wrote it. Sorry
18:29 amalia: Ah.
18:29 amalia: It's bad juju to share a script with no author.
18:29 amalia: Most here wouldn't touch it without it. Could be copyrighted, etc.
18:29 MTS1: DayBuck; so looks like standard pivot levels, no extensions? Is the 'special' thing the coloring based on SMA crossover?
18:30 FunPilot: If I may ask a dumb question, is there an easy stock screener on Thinkorswim to find asset classes and sub classes like Market Cap, Domestic, International, Fixed Income, Equity.
18:30 daybuck: All I know is JJ. Sorry
18:33 daybuck: From what I know, the only thing special is the pivot levels remain the same whereas the boxed ones on TOS move daily depending on the market. Reminds me somewhat of Darvas Boxes but......
18:34 MTS1: They do not; I already told you multiple times that you can change the input to not change daily
18:35 daybuck: They do not what MTS1?
18:35 MTS1: change every day if you don't want them to; they have inputs for the periods you wanted.
18:36 MTS1: (just like the script you shared)
18:37 daybuck: ok. Great. Now were getting somewhere. Back to my original proclamation. I dont code. So how do I mirror this script with the boxed one on TOS?
18:37 MTS1: have not seen one for periods less than day though; but does not sound like you were looking for the 8 hour pivot option.
18:40 daybuck: The idea is to trade off of an hourly chart at or near the monthly pivit (assuming some other criteria is met)
18:40 daybuck: Pivot
18:42 MTS1: Seriously Day; been saying that starting with my first responses. This has nothing to do with coding. Check out the built-in ones, read the tutorials at tlc.thinkorswim.com to get familiar with TOS, and ask support for a platform tour. Make sure you have 10 questions ready for them so they can show you the platform inside out.
18:47 daybuck: i had a platform tour 5 years ago when I started using TOS. I just never coded anything so I cant tell where the boxed one is different from what I wanted coded. All I know is that the two are different. The pivots are not the same as they are on the other platform
18:48 MTS1: When you set them to weekly or monthly they are not the same?
18:49 MTS1: Which ones did you try?
18:50 amalia: daybuck, if I can explain the whole situation here today is like going to McDonald's and giving the cashier a wet paper where the order was written in and not being able to give some sort of idea of what was originally there and expecting the cashier to be a sort of mind-reader. There's going to be a disconnect here until you can provide us with the author, link to the study/strategy with parameters/data, etc.
18:51 daybuck: Honestly, I havent tried personally. The fellow I got the code from told me when I asked that it didn't match the other platform because of the movement. He uses it on another platform. I would rather use TOS so I'm trying to convert it
18:52 daybuck: He used to use TOS
18:53 MTS1: Right when we started this whole (long) conversation you said you tried the built-in ones and that they changed daily, and I told you the built-in ones have settings for weekly and monthly when you said that's what you needed. We're full back now; why don't you try the built-in ones and see what you find.
18:54 sebastian2363: Hey, sorta new to the system here - I was wondering if any of you guys got EarningsPerShareTTM() to work. I can't even get it to plot.
18:54 amalia: 1h:35m of talking with daybuck. I tap out. GL daybuck.
18:54 amalia: Welcome sebastian2363.
18:54 daybuck: No problem. What do I change in the built in code to keep them from moving daily?
18:55 amalia: I was about to reply. lol No!
18:55 amalia: sebastian, did you try different tickers?
18:55 sebastian2363: I tried the default and "v".
18:55 MTS1: they'll give you a platform tour for free every 6 months
18:57 daybuck: This would have been much simpler if you could just not respond or admit you dont know how to answer the question
18:58 MTS1: I don't see EarningsPerShareTTM()?
18:59 sebastian2363: Its under the new "stock fundamentals" tab
18:59 MTS1: Oh; not a script?
19:00 sebastian2363: It is a script function
19:01 MTS1: daybuck; really/??? I know the answer, and so should you, we discussed them right in the beginning. It would have been much easier if you just were listening and honest / trying from the start.
19:03 MTS1: It does not seem like you've actually used TOS in the past 5 years and don't know how to add a built-in indicator? Do you know how to add a MA and change the settings? This is not a coding issue, this is PEBKAC.
19:04 amalia: I indulged you for more than a hour. MTS1 also concluded that we've gone full circle but you keep thinking otherwise. Here I am still replying back giving you the benefit of the doubt that you can somehow recover.
19:04 amalia: +1 MTS1
19:06 amalia: btw here are some of your pivots
def MonPivot = HL3(period = AggregationPeriod.MONTH);
def WeekPivot = HL3(period = AggregationPeriod.WEEK);
19:07 MTS1: Sebastian; have not played with those yet, but I'd try some different tickers.
19:07 amalia: daybuck has left the room. lol
19:08 amalia: "No one else can be right" attitude even when asking for help. smh -_-
19:09 sebastian2363: ok. thank you let me try
19:10 amalia: Room, what's a good way to collect Yearly OHLC values?
19:10 MTS1: But my indicator is special; I want it coded from scratch even if it already exists and I don't know what it does;)
19:11 MTS1: Amalia; O/C should be easy based on year change; would you want to use secondary aggregation for H/L or are you trying to keep it scanner friendly?
19:12 MTS1: H/L could be done that way also I guess based on year change; how many years back do you need though?
19:12 MTS1: Amalia; still there??? ;)
19:13 amalia: Yeah, going back and forth from Editor, chart then back here.
19:13 amalia: Funny link but this is what I have so far:
http://tos.mx/SedWed#
19:13 amalia: SedWed. lmao
19:17 MTS1: Not sure why yo have the extra if-then loop in there instead of 
def YearL = if YearChange==1 then L else if L<=YearL[1] then L else  YearL[1] ;
19:18 MTS1: but that's one way. Was thinking you wanted prior year OHLC which you could then carry forward. Or was thinking using monthly aggregation and getting highest, but this is easier.
19:19 amalia: I'm open to ideas really.
19:19 MTS1: (And the close obviously is the prior year's close).
19:19 MTS1: How are you using the values; how far back do you need OHLC, just prior year or current year?
19:20 amalia: This is what I'm trying to calculate:
def yearMinRange = Average(if YearC>=YearO then Min(YearH-YearC,YearO-YearL) else Min(YearH-YearO,YearC-YearL),10);
19:20 amalia: So I can't use Highest/Lowest cause that uses a rolling period
19:24 MTS1: are those current year values?
19:24 amalia: The ones in the label, yes.
19:24 MTS1: no hte yearMinRange def
19:24 MTS1: *the
19:25 amalia: Yes.
19:26 amalia: It's gonna be current until it's BNd I think
19:26 MTS1: Then you've got it already, except use the current close instead of tye Y one as that's last year's close.
19:27 amalia: But I'm trying to get last year's H/L. I can't use current values for calculation
19:27 fibfibfib: hey amalia, I just open your work on the yearly and it looks cool. Just a though, is it possible to include the open and closing price for yearly, monthly, quartley, weekly and daily?
19:27 MTS1: That's what I was asking;)
19:28 amalia: fibfibfib, it looks cool but it's not done yet. Will share when it's done.
19:28 fibfibfib: and on each line, add a bubble to say year open, year close...etc
19:29 MTS1: Then carry forward def PYH = if YearChange==1 then  YearO[1] else PYH[1]; ? 
19:29 MTS1: Sorry PYO in this case - PriorYearOpen; same for H/L
19:29 fibfibfib: thanks Amalia, MTS1.. im just beginning to learn so not as expert as you guys
19:30 fibfibfib: but so far, that's a very good idea to start on.
19:30 MTS1: WE NEED MORE BUBBLE (in SNL CowBell Voice)
19:32 amalia: lol
19:32 MTS1: Is that what you need Amalia, or am I missing something still?
19:33 amalia: Getting off desktop. that useless chat earlier fried my brain. gonna go get my green remedy on to get some cells back to attack this iead head on with more patience. =) MTS1, thanks for indulging
19:34 MTS1: lol, gn
19:34 amalia: =)
19:38 fibfibfib: don't go too long now, we need your brainpower. hahahaha
19:39 fibfibfib: just kidding
19:42 Mobius: 
# Yearly Floor Trader Pivots
# V01.9.2011 
#hint:Yearly Floor Trader Pivots: Use chart aggregations for at least 2 years Daily
# PIVOT = (High + Close + Low)/3 
# R4 = High + 3 x (Pivot - Low)
# R3 = High + 2(Pivot â Low)
# R2 = Pivot + (R1 â S1)
# R1 = (2*Pivot) â Low
# S1 = (2*Pivot) â High
# S2 = Pivot â (R1 â S1)
# S3 = Low â 2(Hi â Pivot)
# S4 = Low - 3 x (High - Pivot)
input YearsBack = 1;
def bar = BarNumber();
def ThisYear = GetYear() == GetLastYear();
def y1fstBar = if GetYear() == GetLastYear() - (YearsBack + 1)
               then bar
               else y1fstBar[1];
def y1LstBar = if GetYear() == GetLastYear() - YearsBack
               else y1LstBar[1];
def y1H = if bar == y1fstBar
          then high
          else if bar >= y1fstBar and bar <= y1LstBar and high > y1H[1]
               then high
               else y1H[1];
def y1Hbar = if high == y1H
             then bar
             else y1Hbar[1];
def y1L = if bar == y1fstBar
          then low
          else if bar >= y1fstBar and bar <= y1LstBar and low < y1L[1]
               then low
               else y1L[1];
def y1Lbar = if low == y1L
             else y1Lbar[1];
def y1c = if GetYear() == GetLastYear() - 1
          then close
          else y1c[1];
def yearHigh = if bar >= HighestAll(y1Hbar) then y1H else Double.NaN;
def yearLow = if bar >= HighestAll(y1Lbar) then y1L else Double.NaN;
def yearClose = if ThisYear then y1c else Double.NaN;
def BubbleLocation = isNaN(close[1]) and !isNaN(close[2]);
plot pivot = Round(((yearClose + yearHigh + yearLow) / 3) / TickSize(), 0) * TickSize();
AddChartBubble(BubbleLocation, HighestAll(pivot), "Pivot", Color.DARK_GRAY, yes);
plot R1 = Round(((2 * pivot) - yearLow) / TickSize(), 0) * TickSize();
AddChartBubble(BubbleLocation, HighestAll(R1), "R1", Color.DARK_GRAY, no);
plot S1 = Round(((2 * pivot) - yearHigh) / TickSize(), 0) * TickSize();
AddChartBubble(BubbleLocation, HighestAll(S1), "S1", Color.DARK_GRAY, yes);
plot R2 = Round((pivot + (R1 - S1)) / TickSize(), 0) * TickSize();
AddChartBubble(BubbleLocation, HighestAll(R2), "R2", Color.DARK_GRAY, no);
plot S2 = Round((pivot - (R1 - S1)) / TickSize(), 0) * TickSize();
AddChartBubble(BubbleLocation, HighestAll(S2), "S2", Color.DARK_GRAY, yes);
plot R3 = Round((yearHigh + (2 * (pivot - yearLow))) / TickSize(), 0) * TickSize();
AddChartBubble(BubbleLocation, HighestAll(R3), "R3", Color.DARK_GRAY, no);
plot S3 = Round((yearLow - (2 * (yearHigh - pivot))) / TickSize(), 0) * TickSize();
AddChartBubble(BubbleLocation, HighestAll(S3), "S3", Color.DARK_GRAY, yes);
plot R4 = Round((yearHigh + (3 * (pivot - yearLow))) / TickSize(), 0) * TickSize();
AddChartBubble(BubbleLocation, HighestAll(R4), "R4", Color.DARK_GRAY, no);
plot S4 = Round((yearLow - (3 * (yearHigh - pivot))) / TickSize(), 0) * TickSize();
AddChartBubble(BubbleLocation, HighestAll(S4), "S4", Color.DARK_GRAY, yes);
pivot.SetPaintingStrategy(PaintingStrategy.DASHES);
pivot.SetDefaultColor(Color.DARK_ORANGE);
pivot.SetLineWeight(1);
R1.SetPaintingStrategy(PaintingStrategy.DASHES);
R1.SetDefaultColor(Color.GREEN);
R1.SetLineWeight(1);
R2.SetPaintingStrategy(PaintingStrategy.DASHES);
R2.SetDefaultColor(Color.GREEN);
R2.SetLineWeight(1);
R3.SetPaintingStrategy(PaintingStrategy.DASHES);
R3.SetDefaultColor(Color.GREEN);
R3.SetLineWeight(1);
R4.SetPaintingStrategy(PaintingStrategy.DASHES);
R4.SetDefaultColor(Color.GREEN);
R4.SetLineWeight(1);
S1.SetPaintingStrategy(PaintingStrategy.DASHES);
S1.SetDefaultColor(Color.RED);
S1.SetLineWeight(1);
S2.SetPaintingStrategy(PaintingStrategy.DASHES);
S2.SetDefaultColor(Color.RED);
S2.SetLineWeight(1);
S3.SetPaintingStrategy(PaintingStrategy.DASHES);
S3.SetDefaultColor(Color.RED);
S3.SetLineWeight(1);
S4.SetPaintingStrategy(PaintingStrategy.DASHES);
S4.SetDefaultColor(Color.RED);
S4.SetLineWeight(1);
# End Code Yearly Floor Trader Pivots
19:43 amalia: Thanks Mob. Whatâs this?
19:45 admin_bkTOS: 
This is a reminder that the thinkorswim chat rooms will be closing in 15 min.  Forum hours are from 5am-8pm CT Monday-Thursday, and 5am-5pm CT on Friday. Please finish your conversations before 8pm CT.
19:46 Mobius: yearly floor trader pivots. Someone asked for by email. So I posted them here for their group
19:46 DMonkey: late to the party but here since I was typing it out while that was being posted, you can have it any way....hahaha...was some logic to get you started.....
def Data = if GetYear() == GetLastYear() && getyear()[1] != getlastyear()
           then open 
           else data[1];
plot o = data;
o.setpaintingStrategy(paintingStrategy.POINTS);
def data2 = if getyear()[1] == GetLastYear() - 1 && getyear()[2] != GetLastYear() - 1
            then open
            else data2[1];
plot oo = data2;
oo.setpaintingStrategy(paintingStrategy.POINTS);
19:48 DMonkey: gn errbody....
19:49 Vimes: don't think buck is coming back but here's a crack at what he wanted
plot pivot_m = hlc3(period=aggregationPeriod.MONTH)[1];
plot pivot_w = hlc3(period=AggregationPeriod.WEEK)[1];
plot pivot_d = hlc3(period=AggregationPeriod.DAY)[1];
input short_len = 200;
input long_len = 800;
input src = close;
def smma_short_ =
   compoundvalue(1,(smma_short_[1]*(short_len-1)+src)/short_len,average(src,short_len));
def smma_long_ =
  compoundvalue(1,(smma_long_[1]*(long_len-1)+src)/long_len,average(src,long_len));
plot smma_short = smma_short_;
plot smma_long = smma_long_;
def lb = smma_long - smma_long[1];
def sb = smma_short - smma_short[1];
input colorbars = yes; #hint colorbars: color pricebars
assignpricecolor(if colorbars then
                    if (lb > 0 and sb > 0 and src > pivot_m and pivot_m > smma_short and smma_short > smma_long) then color.lime else if (lb < 0 and sb < 0 and src < pivot_m and pivot_m < smma_short and smma_short < smma_long and src<pivot_m) then color.red else color.white else color.current);
19:52 fibfibfib: Thanks Mobius!!!!!
19:57 amalia: Iâll continue tonight and if Iâm still stuck, Iâll ask again here with hopefully an update tomorrow.
